import{a as b,b as t,e as w,f as z,r as ne,o as h,g as S,i as V,u as j,c as B,w as me,m as Le,j as L,k as p,F as M,l as D,t as v,n as I,p as ge,q as oe,T as He,s as ye,v as Re,x as De,y as O,z as Se,A as _e,h as Pe,B as Ee,C as K,D as Z,E as Be,G as Ne,H as Ie,I as Oe,J as Ve}from"./vue-DrhbM47G.js";import{F as R,S as N,r as je,g as xe,a as We,l as Ke,f as Ue,b as ze,c as Fe,d as qe,e as Ge,h as Ye}from"./libraries-BRcsaPPZ.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerPolicy&&(l.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?l.credentials="include":e.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(e){if(e.ep)return;e.ep=!0;const l=n(e);fetch(e.href,l)}})();const le=(o,s)=>{const n=o.__vccOpts||o;for(const[i,e]of s)n[i]=e;return n},Je={},Xe={id:"header",class:"mb-2 bg-dark"},Ze={class:"container"},Qe={class:"d-flex justify-content-between navbar navbar-dark navbar-expand align-items-center"},et={id:"navbar-default",class:"navbar-nav"},tt={class:"nav-item"};function ot(o,s){const n=ne("router-link");return h(),b("header",Xe,[t("div",Ze,[t("nav",Qe,[s[1]||(s[1]=t("a",{href:"#",class:"navbar-brand d-flex flex-column align-items-center"},[t("span",null,"Test")],-1)),t("ul",et,[t("li",tt,[w(n,{to:{name:"heroes.list"},class:"nav-link"},{default:z(()=>s[0]||(s[0]=[S(" Heroes ")])),_:1,__:[0]})])])])])])}const nt=le(Je,[["render",ot]]),q=V(!1),ce=V({}),W=V({x:0,y:0}),G=V(null),H=V({rollType:"normal",modifierValue:0,attackRollType:null});let Y=null,J=null,X=null;function se(){const{t:o}=j(),s=()=>{H.value={rollType:"normal",modifierValue:0,attackRollType:null}},n=()=>[{label:o("contextMenu.normalRoll"),key:"rollType",value:"normal"},{label:o("contextMenu.advantageRoll"),key:"rollType",value:"advantage"},{label:o("contextMenu.disadvantageRoll"),key:"rollType",value:"disadvantage"}],i=B(()=>{if(H.value.rollType==="normal")return[];const g=H.value.rollType;let d=1;return g==="disadvantage"&&(d=-1),[{label:o("contextMenu.modifierSmall",{value:2*d}),key:"modifierValue",value:2*d},{label:o("contextMenu.modifierMedium",{value:5*d}),key:"modifierValue",value:5*d},{label:o("contextMenu.modifierLarge",{value:8*d}),key:"modifierValue",value:8*d}]}),e=()=>[{label:o("contextMenu.followUpAttack"),key:"attackRollType",value:"followUp"}],l=()=>{if(!q.value)return;const g=document.getElementById("context-menu-container");if(!g)return;const d=g.offsetWidth,c=g.offsetHeight,m=window.innerWidth,a=window.innerHeight;let y=W.value.x,$=W.value.y;y+d>m&&(y=m-d-10),y<0&&(y=10),$+c>a&&($=a-c-10),$<0&&($=10),W.value={x:y,y:$}},r=(g,d=null,c={},m={})=>{g.preventDefault(),s(),Object.assign(H.value,m),Object.assign(ce.value,c),q.value=!0,G.value=d?Le(d):null,W.value={x:g.clientX,y:g.clientY},setTimeout(()=>{l(),Y=a=>{const y=document.getElementById("context-menu-container");y&&!y.contains(a.target)&&f()},J=a=>{const y=document.getElementById("context-menu-container");y&&!y.contains(a.target)&&f()},X=a=>{a.key==="Escape"&&f()},document.addEventListener("click",Y,!0),document.addEventListener("contextmenu",J,!0),document.addEventListener("keydown",X)},50)},f=()=>{q.value=!1,ce.value={},W.value={x:0,y:0},G.value=null,s(),Y&&(document.removeEventListener("click",Y,!0),Y=null),J&&(document.removeEventListener("contextmenu",J,!0),J=null),X&&(document.removeEventListener("keydown",X),X=null)},u=(g,d)=>{const c=H.value.rollType;g==="rollType"&&d==="normal"?H.value.modifierValue=0:g==="rollType"&&d!=="normal"&&H.value.modifierValue===0&&(H.value.modifierValue=d==="advantage"?2:-2),g==="attackRollType"?H.value.attackRollType===d?H.value.attackRollType=null:H.value.attackRollType=d:H.value[g]=d,g==="rollType"&&H.value.rollType!==c&&setTimeout(l,0)},k=()=>{G.value&&G.value({...H.value}),f()};return me(q,g=>{g?window.addEventListener("resize",l):window.removeEventListener("resize",l)}),{isContextMenuOpen:q,contextMenuConfig:ce,contextMenuCallback:G,contextMenuPosition:W,selectedModifiers:H,openRollContextMenu:r,closeContextMenu:f,selectOption:u,triggerRoll:k,getRollTypeOptions:n,getModifierValueOptions:i,getAttackRollOptions:e}}const lt=["onClick"],st={key:0,class:"ms-2"},it=["onClick"],rt={key:0,class:"ms-2"},at=["onClick"],ct={key:0,class:"ms-2"},ut={__name:"ContextMenu",setup(o){const{isContextMenuOpen:s,contextMenuConfig:n,contextMenuPosition:i,selectedModifiers:e,selectOption:l,triggerRoll:r,getRollTypeOptions:f,getModifierValueOptions:u,getAttackRollOptions:k}=se(),{t:g}=j(),d=T=>({left:`${T.x}px`,top:`${T.y}px`,position:"fixed",backgroundColor:"#333",border:"1px solid #555",borderRadius:"4px",boxShadow:"0 2px 10px rgba(0,0,0,0.5)",zIndex:1e3,padding:"5px 0",minWidth:"150px",listStyle:"none",margin:0}),c={padding:"8px 15px",cursor:"pointer",color:"#eee",backgroundColor:"transparent"},m={backgroundColor:"#555"},a={borderTop:"1px solid #555",margin:"5px 0"},y={borderTop:"3px double #555",margin:"5px 0"},$=(T,x)=>e.value[T]===x;return(T,x)=>p(s)?(h(),b("ul",{key:0,style:I(d(p(i))),id:"context-menu-container"},[(h(!0),b(M,null,D(p(f)(),(_,A)=>(h(),b("li",{key:`roll-type-${A}`,style:c,onClick:C=>p(l)(_.key,_.value),onMouseover:x[0]||(x[0]=C=>C.currentTarget.style.backgroundColor=m.backgroundColor),onMouseleave:x[1]||(x[1]=C=>C.currentTarget.style.backgroundColor=c.backgroundColor)},[S(v(_.label)+" ",1),$(_.key,_.value)?(h(),b("span",st,[w(p(R),{icon:["fas","fa-check"]})])):L("",!0)],40,lt))),128)),p(u).length>0?(h(),b(M,{key:0},[t("li",{style:a}),(h(!0),b(M,null,D(p(u),(_,A)=>(h(),b("li",{key:`mod-value-${A}`,style:c,onClick:C=>p(l)(_.key,_.value),onMouseover:x[2]||(x[2]=C=>C.currentTarget.style.backgroundColor=m.backgroundColor),onMouseleave:x[3]||(x[3]=C=>C.currentTarget.style.backgroundColor=c.backgroundColor)},[S(v(_.label)+" ",1),$(_.key,_.value)?(h(),b("span",rt,[w(p(R),{icon:["fas","fa-check"]})])):L("",!0)],40,it))),128))],64)):L("",!0),p(n).includeFollowUpOption?(h(),b(M,{key:1},[t("li",{style:a}),(h(!0),b(M,null,D(p(k)(),(_,A)=>(h(),b("li",{key:`attack-roll-${A}`,style:c,onClick:C=>p(l)(_.key,_.value),onMouseover:x[4]||(x[4]=C=>C.currentTarget.style.backgroundColor=m.backgroundColor),onMouseleave:x[5]||(x[5]=C=>C.currentTarget.style.backgroundColor=c.backgroundColor)},[S(v(_.label)+" ",1),$(_.key,_.value)?(h(),b("span",ct,[w(p(R),{icon:["fas","fa-check"]})])):L("",!0)],40,at))),128))],64)):L("",!0),t("li",{style:y}),t("li",{style:I({...c,textAlign:"center",fontWeight:"bold"}),onClick:x[6]||(x[6]=(..._)=>p(r)&&p(r)(..._)),onMouseover:x[7]||(x[7]=_=>_.currentTarget.style.backgroundColor=m.backgroundColor),onMouseleave:x[8]||(x[8]=_=>_.currentTarget.style.backgroundColor=c.backgroundColor)},[S(v(p(g)("contextMenu.rollButton"))+" ",1),w(p(R),{icon:["fas","fa-dice"]})],36)],4)):L("",!0)}},dt=le(ut,[["__scopeId","data-v-9a1abadf"]]),mt={__name:"App",setup(o){const s=ge(),n=V("container"),i=B(()=>s.meta.mainClass||"container"),e=V("fade-left");me(()=>s.fullPath,(r,f)=>{const u=r.split("/").filter(Boolean).length,k=f.split("/").filter(Boolean).length;u<k?e.value="fade-right":e.value="fade-left"});function l(){n.value=i.value}return(r,f)=>{const u=ne("RouterView");return h(),b(M,null,[w(nt),w(dt),w(u,null,{default:z(({Component:k})=>[t("main",{class:oe(["my-3",n.value])},[w(He,{name:e.value,mode:"out-in",onAfterLeave:l,onBeforeEnter:l},{default:z(()=>[(h(),ye(Re(k)))]),_:2},1032,["name"])],2)]),_:1})],64)}}},ft={};function pt(o,s){return h(),b("h1",null,"Test")}const ht=le(ft,[["render",pt]]),fe=De("hero",{state:()=>({heroes:[],loaded:!1}),persist:{key:"heroes",paths:["heroes"]},getters:{getHeroes:o=>o.heroes,getHeroById:o=>s=>o.heroes.find(n=>n.id===s)},actions:{saveHero(o){const s=this.heroes.findIndex(n=>n.id===o.id);s!==-1?this.heroes[s]=o:this.heroes.push(o)},deleteHero(o){const s=this.heroes.findIndex(n=>n.id===o.id);s!==-1&&this.heroes.splice(s,1)}}});function ke(){const{t:o}=j();return{showDeleteHeroModal:(n,i)=>{N.fire({title:o("deleteHero.title",{name:n.name}),text:o("deleteHero.text"),icon:"warning",confirmButtonText:o("delete"),confirmButtonColor:"var(--bs-primary)",showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:o("cancel"),preConfirm:()=>{i&&i(),N.fire({title:o("deleteHero.deletedModal.title",{name:n.name}),html:o("deleteHero.deletedModal.text"),icon:"success",timer:2e3,timerProgressBar:!0,confirmButtonText:o("close")})}})}}}function $e(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():(console.warn("crypto.randomUUID() not available, falling back to Date.now() for ID generation."),Date.now())}class bt{id;name;attributes={strength:1,dexterity:1,endurance:1,concentration:1,intuition:1,experience:1};abilities=[];maxHitPoints=0;currentHitPoints=0;constructor(s,n=null,i=null){this.id=$e(),this.name=s,n&&(this.attributes=n),i&&(this.abilities=i)}}const pe={strength:10,dexterity:10,endurance:10,concentration:10,intuition:10,experience:10},vt=[{name:"endure",attributes:["concentration","endurance"],honeLevel:0,category:"body"},{name:"moveObject",attributes:["strength","endurance"],honeLevel:0,category:"body"},{name:"jumpingClimbing",attributes:["strength","dexterity"],honeLevel:0,category:"body"},{name:"agility",attributes:["dexterity","experience"],honeLevel:0,category:"body"},{name:"stealth",attributes:["dexterity","intuition"],honeLevel:0,category:"body"},{name:"persuade",attributes:["concentration","intuition"],honeLevel:0,category:"social"},{name:"intimidate",attributes:["concentration","strength"],honeLevel:0,category:"social"},{name:"deceive",attributes:["dexterity","intuition"],honeLevel:0,category:"social"},{name:"insight",attributes:["intuition","experience"],honeLevel:0,category:"social"},{name:"perceive",attributes:["strength","endurance"],honeLevel:0,category:"senses"},{name:"rememberingReflectionResearch",attributes:["intuition","experience"],honeLevel:0,category:"senses"},{name:"magicSense",attributes:["concentration","experience"],honeLevel:0,category:"senses"}];class gt extends bt{level=1;learningPoints=10;actions=[];maxManaPoints=0;currentManaPoints=0;constructor(s,n=pe,i=vt){super(s,n,i)}}const yt={class:"d-flex justify-content-between align-items-center"},_t={class:"list-group"},xt={class:"d-flex flex-column gap-2"},kt={class:"d-flex flex-row align-items-baseline gap-2"},$t=["onClick"],Ct={__name:"HeroesListView",setup(o){const s=fe(),{showDeleteHeroModal:n}=ke(),{t:i}=j(),e=B(()=>s.getHeroes.sort((k,g)=>k.name.toLowerCase().localeCompare(g.name.toLowerCase())));function l(){N.fire({title:i("createHero.title"),html:i("createHero.html"),icon:"question",input:"text",inputValue:i("createHero.defaultValue"),inputPlaceholder:i("createHero.placeholder"),inputAutoTrim:!0,inputAutoFocus:!0,inputAttributes:{autocapitalize:"off"},confirmButtonColor:"var(--bs-success)",confirmButtonText:i("create"),showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:i("cancel"),preConfirm:r})}function r(u){if(u=u.toString(),!u||u.length===0||u.toLowerCase()===i("createHero.namelessHero.name").toLowerCase()){N.fire({icon:"error",title:i("error"),html:i("createHero.namelessHero.html"),confirmButtonText:i("back"),confirmButtonColor:"var(--bs-primary)",preConfirm:()=>{l()}});return}try{const k=new gt(u);s.saveHero(k),ve.push({name:"heroes.detail",params:{id:k.id}})}catch(k){N.fire({icon:"error",title:"error",html:k.message,confirmButtonText:i("back"),confirmButtonColor:"var(--bs-primary)",preConfirm:()=>{l()}})}}function f(u){n(u,()=>{s.deleteHero(u)})}return(u,k)=>{const g=ne("RouterLink");return h(),b("div",null,[t("div",yt,[t("h1",null,v(u.$t("heroesList.headline")),1),t("button",{class:"btn btn-secondary",onClick:l},v(u.$t("new")),1)]),k[0]||(k[0]=t("hr",null,null,-1)),t("div",_t,[(h(!0),b(M,null,D(e.value,d=>(h(),ye(g,{key:`hero_${d.name}`,to:{name:"heroes.detail",params:{id:d.id}},class:"list-group-item list-group-item-action d-flex flex-row justify-content-between align-items-center"},{default:z(()=>[t("div",xt,[t("div",kt,[t("h2",null,v(d.name),1),t("span",null," ("+v(u.$t("hero.level"))+": "+v(d.level)+" "+v(u.$t("hero.learningPointsShort"))+": "+v(d.learningPoints)+") ",1)])]),t("div",null,[t("button",{class:"btn btn-danger",onClick:O(c=>f(d),["prevent"])},v(u.$t("delete")),9,$t)])]),_:2},1032,["to"]))),128))])])}}},P={strength:"red",dexterity:"green",endurance:"darkgoldenrod",concentration:"blue",intuition:"purple",experience:"gray"},wt={body:"Körper",other:"Andere",senses:"Sinne",social:"Sozial",endure:"Durchhalten",moveObject:"Objekte bewegen",jumpingClimbing:"Springen/Klettern",agility:"Gewandtheit",stealth:"Heimlichkeit",persuade:"Überreden",intimidate:"Einschüchtern",deceive:"Betrügen",insight:"Menschenkenntnis",perceive:"Wahrnehmen",rememberingReflectionResearch:"Erinnern/Erwägen/Erforschen",magicSense:"Magiegespür"},Mt={includeAttributeDiceToRoll:"+ Attributswürfel"},Tt={attributeLabel:"Attribut",rollLabel:"Wurf",rollPlaceholder:"1W6",defaultName:"Volles Pfund aufs Maul!",editTitle:'"{name}"<br>bearbeiten',includeAttributeDiceToRollHelp:"Wenn aktiv, wird der Attributswurf (ohne den W20) zum Wurf hinzugefügt.",includeAttributeDiceToRollLabel:"Attributswurf zu dem Wurf hinzufügen?",invalidRollNotation:"Ungültige Wurf-Notation. Bitte das Format 'xWy+z' verwenden.",nameLabel:"Name",namePlaceholder:"Der Name der Waffe/Aktion",newTitle:"Neue Waffe/Aktion anlegen",tagsLabel:"Eigenschaften/Merkmale",tagsPlaceholder:"Eigenschaften/Merkmale (per Komma getrennt)"},At={name:"Gothic Tales"},Lt="Angriffswurf",Ht={followUp:"(2W20kl)"},Rt={concentration:"Konzentration",concentrationShort:"Konz",dexterity:"Geschicklichkeit",dexterityShort:"Ge",intuition:"Intuition",intuitionShort:"Intu",endurance:"Ausdauer",enduranceShort:"Ausd",experience:"Erfahrung",experienceShort:"Erf",strength:"Stärke",strengthShort:"St"},Dt="Zurück",St="Abbrechen",Pt={normalRoll:"Normaler Wurf",advantageRoll:"Wurf mit Vorteil",disadvantageRoll:"Wurf mit Nachteil",modifierSmall:"Klein ({value})",modifierMedium:"Mittel ({value})",modifierLarge:"Groß ({value})",attackRollOptions:"Angriffsoptionen",followUpAttack:"Folgeangriff",rollButton:"Würfeln"},Et="Erstellen",Bt={defaultValue:"Neuer Held",html:"Bitte den Namen des Helden eingeben.<br><small><i>Der Namenlose Held ist nicht erlaubt</i> 😜</small>",placeholder:"Name des Helden",title:"Neuen Held erstellen",namelessHero:{name:"Namenlose Held",html:"Wie gesagt, du bist <b>nicht</b> der Namenlose Held!"}},Nt="Schließen",It="Wurf",Ot={text:"Diese Aktion kann nicht mehr rückgängig gemacht werden!",title:'"{name}"<br>wirklich löschen?',deletedModal:{text:"War sowieso nur Schrott!",title:'"{name}"<br>wurde gelöscht'}},Vt={text:"Diese Aktion kann nicht mehr rückgängig gemacht werden!",title:'"{name}"<br>wirklich löschen?',deletedModal:{text:"Möge Innos der Seele gnädig sein.",title:'"{name}"<br>wurde gelöscht'}},jt="W",Wt="Fehler",Kt={ability:"Fähigkeit",abilities:"Fähigkeiten",attribute:"Attribut",attributes:"Attribute",learningPoints:"Lernpunkte",learningPointsShort:"LP",level:"Stufe",name:{label:"Name des Helden",placeholder:"Gib hier den Namen deines Helden an"},"weapons&actions":"Waffen & Aktionen"},Ut={headline:"Liste deiner Helden",navigateTo:"Zur Heldenliste"},zt={title:"Held nicht gefunden",text:"Der angefragte Held existiert nicht oder wurde gelöscht. Sie werden zur Heldenliste weitergeleitet."},Ft={level0:"ungeübt",level1:"geübt",level2:"gelehrt",level3:"gemeistert"},qt={advantage:"Vorteil",disadvantage:"Nachteil"},Gt="Speichern",Yt="Status",Jt="Summe: {sum}",Xt="Wert: {value}",Zt={abilities:wt,action:Mt,actionModal:Tt,app:At,attackRoll:Lt,attackType:Ht,attribute:Rt,back:Dt,cancel:St,contextMenu:Pt,create:Et,createHero:Bt,close:Nt,roll:It,delete:"Löschen",deleteAction:Ot,deleteHero:Vt,diceShort:jt,error:Wt,hero:Kt,heroesList:Ut,heroNotFound:zt,honeLevel:Ft,modifier:qt,new:"Neu",save:Gt,status:Yt,sum:Jt,valueDisplay:Xt},F=Se({locale:"de",fallbackLocale:"de",messages:{de:Zt}});var Qt=je();const eo=xe(Qt),to={class:"d-flex flex-column"},oo=["innerHTML"],no={key:0,class:"toast-divider"},lo={key:1,class:"toast-section-title"},so={class:"d-flex flex-row align-items-center toast-rolls-container"},io={class:"d-flex flex-column align-items-center toast-roll-part"},ro={class:"toast-dice-notation"},ao={class:"toast-roll-values"},co={class:"toast-dice-notation"},uo={class:"toast-roll-values"},mo={class:"toast-bonus-notation"},fo={class:"toast-bonus-value"},po={class:"toast-modifier-notation"},ho={class:"toast-modifier-value"},bo={key:0,class:"toast-plus-sign"},vo={key:0,class:"text-end toast-section-sum"},go={class:"text-end toast-section-sum"},yo={key:2,class:"toast-footer-text"},_o=["innerHTML"],xo={__name:"DiceRollToastContent",props:{header:{type:String,required:!1,default:""},headerColor:{type:String,required:!1,default:"inherit"},sections:{type:Array,required:!0,default:()=>[]},sum:{type:Number,required:!1},footer:{type:String,required:!1,default:""}},setup(o){const{t:s}=j();return(n,i)=>(h(),b("div",to,[o.header?(h(),b("div",{key:0,style:I({color:o.headerColor}),class:"toast-header-text"},[t("span",{innerHTML:o.header},null,8,oo)],4)):L("",!0),(h(!0),b(M,null,D(o.sections,(e,l)=>(h(),b(M,{key:"section_"+l},[l>0?(h(),b("hr",no)):L("",!0),e.title?(h(),b("b",lo,v(e.title),1)):L("",!0),t("div",so,[(h(!0),b(M,null,D(e.parts,(r,f)=>(h(),b(M,{key:"section_"+l+"_part_"+f},[t("div",io,[r.item.type==="dice"?(h(),b(M,{key:0},[t("span",ro,v(r.item.count>1?r.item.count:"")+v(p(s)("diceShort"))+v(r.item.sides),1),t("span",ao,v(r.rolls.join("+")),1)],64)):L("",!0),r.item.type==="d20special"?(h(),b(M,{key:1},[t("span",co,v(p(s)(r.label)),1),t("span",uo,[i[0]||(i[0]=S(" (")),t("span",{class:oe({"toast-roll-selected":r.item.selected===0})},v(r.item.rolls[0]),3),i[1]||(i[1]=S("/")),t("span",{class:oe({"toast-roll-selected":r.item.selected===1})},v(r.item.rolls[1]),3),i[2]||(i[2]=S(") "))])],64)):r.item.type==="bonus"?(h(),b(M,{key:2},[t("span",mo,v(r.sum),1),t("span",fo,v(r.sum),1)],64)):r.item.type==="advantage"||r.item.type==="disadvantage"?(h(),b(M,{key:3},[t("span",po,v(p(s)(`modifier.${r.item.type}`)),1),t("span",ho,v(r.sum),1)],64)):L("",!0)]),f<e.parts.length-1?(h(),b("span",bo," + ")):L("",!0)],64))),128)),e.sum?(h(),b("b",vo,v(p(s)("sum",{sum:e.sum})),1)):L("",!0)])],64))),128)),o.sum?(h(),b(M,{key:1},[i[3]||(i[3]=t("hr",{class:"toast-divider"},null,-1)),t("b",go,v(p(s)("sum",{sum:o.sum})),1)],64)):L("",!0),o.footer?(h(),b("div",yo,[t("span",{innerHTML:o.footer},null,8,_o)])):L("",!0)]))}},he=le(xo,[["__scopeId","data-v-41686c5c"]]);function ie(o,s={}){const n=document.createElement("div"),i=_e({render:()=>Pe(o,s)});i.use(F),i.mount(n);const e=n.innerHTML;return i.unmount(),e}function de(o){if(!Array.isArray(o)||o.length===0)return;const s={pool:o,parts:[],sum:0};for(let n=0;n<o.length;n++){const i=o[n],e={item:i};switch(i.type){case"dice":let l=0;e.rolls=[];for(let r=0;r<i.count;r++){const f=te(i.sides);l+=f,e.rolls.push(f)}e.sum=l;break;case"bonus":e.sum=i.bonus;break;case"advantage":case"disadvantage":e.type=i.type,e.sum=i.value;break}s.sum+=e.sum,s.parts.push(e)}return s}function Ce(o,s={}){const n=o.slice();return n.unshift({type:"dice",count:1,sides:20}),s.rollType&&s.modifierValue!==0&&n.push({type:s.rollType,value:s.modifierValue}),de(n)}function te(o){return 1+Math.floor(Math.random()*o)}const we=[{id:0,i18nKey:"honeLevel.level0",notation:"",poolAdditions:[]},{id:1,i18nKey:"honeLevel.level1",notation:"2",poolAdditions:[{type:"bonus",bonus:2}]},{id:2,i18nKey:"honeLevel.level2",notation:"D4+2",poolAdditions:[{type:"dice",sides:4,count:1},{type:"bonus",bonus:2}]},{id:3,i18nKey:"honeLevel.level3",notation:"2D6+3",poolAdditions:[{type:"dice",sides:6,count:2},{type:"bonus",bonus:3}]}],Me=new Map(we.map(o=>[o.id,o])),ko={NONE:0},{t:Te}=F.global,ue=[2,4,6,8,10,12];function $o(o){const s={2:1};let n=o;for(;n>=10;){let i=!1;for(let e=ue.length-2;e>=0;e--){const l=ue[e];if(s[l]&&s[l]>0){s[l]--,s[l]===0&&delete s[l];const r=ue[e+1];s[r]=(s[r]||0)+1,i=!0;break}}i||s[12]&&s[12]>0&&(s[12]--,s[12]===0&&delete s[12],s[6]=(s[6]||0)+2,i=!0),i||(s[2]=(s[2]||0)+1),n-=10}return s}function Co(o){return Math.max(Math.floor((o-5)/10),0)}function wo(o,s,n){const i=Me.get(n);if(i&&i.poolAdditions.length>0){i.poolAdditions.forEach(l=>{o.push(l)});let e=i.notation;e=e.replace(/D/g,Te("diceShort")),s.push(e)}}function re(o,s=ko.NONE){const n=$o(o),i=Co(o),e=[],l=[];Object.keys(n).map(Number).sort((f,u)=>u-f).forEach(f=>{const u=String(f),k=n[u];e.push({type:"dice",sides:f,count:k}),l.push(`${k}${Te("diceShort")}${u}`)}),i>0&&(e.push({type:"bonus",bonus:i}),l.push(`${i}`)),wo(e,l,s);const r=l.filter(f=>f).join("+");return{dice:n,bonus:i,pool:e,notation:r}}const{t:Q}=F.global;function be(o,s={},n={}){const l={...{text:o,close:!0,html:!0,escapeMarkup:!1,className:"rounded",duration:-1},...s,style:{...{background:"var(--bs-body-bg)",color:"var(--bs-body-color)",border:"2px solid var(--bs-body-color)"},...n}},f=eo(l).showToast().toastElement;f.addEventListener("click",()=>{const u=f.querySelector(".toast-close");u&&u.click()})}function Mo(o,s){const n=Ce(o.pool,s),i=`<b>${Q("attribute."+o.name)}</b>`,e=[{parts:n.parts}],l=P[o.name],r=ie(he,{header:i,headerColor:l,sections:e,sum:n.sum});be(r,{},{borderColor:l})}function To(o,s){const n=Ce(o.pool,s);let i=`<b>${Q(`abilities.${o.name}`)}</b>`;if(o.honeLevel){const u=Me.get(o.honeLevel);u&&(i=`<span>${i} (${Q(u.i18nKey)})</span>`)}const e=[{parts:n.parts}],l=ie(he,{header:i,sections:e,sum:n.sum}),r=P[o.attributes[0]],f=P[o.attributes[1]];be(l,{},{borderTopColor:r,borderLeftColor:r,borderRightColor:f,borderBottomColor:f})}function Ao(o,s,n){const i=re(s);let e=[],l,r=-1;n.attackRollType==="followUp"?(e=[te(20),te(20)],l=Math.min(...e),r=e.indexOf(l)):(e=[te(20)],l=e[0],r=0);let f=i.pool.slice();n.rollType&&n.rollType!=="normal"&&n.modifierValue&&n.modifierValue!==0&&f.push({type:n.rollType,value:n.modifierValue});const u=de(f),k=l+u.sum,g=de(o.roll);let d;o.includeAttributeDiceToRoll?d=u.sum+g.sum:d=g.sum;const c=`<b>${o.name}</b>`;let m=[];e.length>1?m.push({item:{type:"d20special",rolls:e,selected:r},label:"attackType.followUp",rolls:e,sum:l}):m.push({item:{type:"dice",count:1,sides:20},rolls:[l],sum:l}),m.push(...u.parts);const a={title:Q("attackRoll"),parts:m,sum:k};let y;o.includeAttributeDiceToRoll?y=[...u.parts,...g.parts]:y=[...g.parts];const $={title:Q("roll"),parts:y,sum:d},x=ie(he,{header:c,sections:[a,$]});be(x,{},{borderColor:P[o.attribute]})}const Lo=["onClick","onKeydown","onContextmenu"],Ho={class:"ability__name"},Ro={class:"ability__hone-level"},Do=["id","onChange","value"],So=["value"],Po={class:"ability__attributes"},Eo={class:"ms-2"},Bo={class:"ability__notation"},No={__name:"HeroAbilities",props:{hero:{type:Object,required:!0}},emits:["update:abilityHoneLevel"],setup(o,{emit:s}){const n=o,i=s,{openRollContextMenu:e}=se(),{t:l}=j(),r=B(()=>we),f=B(()=>{const d={};return n.hero.abilities.forEach(c=>{const m=n.hero.attributes[c.attributes[0]],a=n.hero.attributes[c.attributes[1]],y=Math.floor((Number(m)+Number(a))/2),{dice:$,bonus:T,pool:x,notation:_}=re(y,c.honeLevel),A={...c,value:y,dice:$,bonus:T,pool:x,notation:_};d[c.category]||(d[c.category]=[]),d[c.category].push(A)}),d});function u(d,c){const m=Number(c.target.value);i("update:abilityHoneLevel",d,m)}function k(d,c={}){To(d,c)}function g(d,c){e(d,m=>{k(c,m)})}return(d,c)=>(h(!0),b(M,null,D(f.value,(m,a,y)=>(h(),b("div",{key:`abilities_${a}`,class:oe(["abilities list-group",{"mb-3":y<Object.keys(f.value).length-1}])},[(h(!0),b(M,null,D(m,($,T)=>(h(),b("div",{key:`ability_${a}_${T}`,class:"ability",tabindex:"0",onClick:O(x=>k($),["prevent"]),onKeydown:Ee(x=>k($),["enter"]),onContextmenu:x=>g(x,$),style:I({"--background-color-1":p(P)[$.attributes[0]],"--background-color-2":p(P)[$.attributes[1]]})},[t("div",Ho,[w(p(R),{icon:["fas","fa-dice"],"fixed-width":"",class:"text-primary"}),t("b",null,v(p(l)(`abilities.${$.name}`)),1)]),t("div",Ro,[t("select",{class:"form-select form-select-sm bg-white",id:`ability_${a}_${T}_honeLevel`,onClick:c[0]||(c[0]=O(()=>{},["stop"])),onChange:x=>u($.name,x),value:$.honeLevel},[(h(!0),b(M,null,D(r.value,x=>(h(),b("option",{key:`ability_${a}_${T}_honeLevel_${x.id}`,value:x.id},v(p(l)(x.i18nKey)),9,So))),128))],40,Do)]),t("div",Po,[t("span",null,[t("b",{style:I({color:p(P)[$.attributes[0]]})},v(p(l)(`attribute.${$.attributes[0]}Short`)),5),c[1]||(c[1]=S(" & ")),t("b",{style:I({color:p(P)[$.attributes[1]]})},v(p(l)(`attribute.${$.attributes[1]}Short`)),5),t("span",Eo," ("+v(p(l)("valueDisplay",{value:$.value}))+") ",1)])]),t("div",Bo,[t("span",null,v($.notation),1)])],44,Lo))),128))],2))),128))}},Io={class:"form-floating mb-3"},Oo=["placeholder","value"],Vo={for:"action-name"},jo={class:"form-floating mb-3"},Wo=["placeholder","value"],Ko={for:"action-tags"},Uo={class:"form-floating mb-3"},zo=["value","selected"],Fo={for:"action-attribute"},qo={class:"form-floating mb-3"},Go=["placeholder","value"],Yo={for:"action-roll"},Jo={class:"text-start"},Xo={class:"form-check form-switch"},Zo=["checked"],Qo={class:"form-check-label",for:"action-includeAttributeDiceToRoll"},en=["innerHTML"],tn={__name:"ActionEditForm",props:{initialAction:{type:Object,required:!0}},setup(o,{expose:s}){const n=o,{t:i}=j(),e=V({id:n.initialAction.id,name:n.initialAction.name,tags:n.initialAction.tags.join(", "),attribute:n.initialAction.attribute,includeAttributeDiceToRoll:n.initialAction.includeAttributeDiceToRoll,notation:n.initialAction.notation,roll:n.initialAction.roll}),l=B(()=>Object.keys(pe).map(r=>({value:r,text:i(`attribute.${r}`)})));return me(()=>n.initialAction,r=>{e.value={id:r.id,name:r.name,tags:r.tags.join(", "),attribute:r.attribute,includeAttributeDiceToRoll:r.includeAttributeDiceToRoll,notation:r.notation,roll:r.roll}},{deep:!0}),s({formData:e}),(r,f)=>(h(),b("div",null,[t("div",Io,[K(t("input",{type:"text",class:"form-control",id:"action-name",placeholder:p(i)("actionModal.namePlaceholder"),"onUpdate:modelValue":f[0]||(f[0]=u=>e.value.name=u),value:e.value.name},null,8,Oo),[[Z,e.value.name]]),t("label",Vo,v(p(i)("actionModal.nameLabel")),1)]),t("div",jo,[K(t("input",{type:"text",class:"form-control",id:"action-tags",placeholder:p(i)("actionModal.tagsPlaceholder"),"onUpdate:modelValue":f[1]||(f[1]=u=>e.value.tags=u),value:e.value.tags},null,8,Wo),[[Z,e.value.tags]]),t("label",Ko,v(p(i)("actionModal.tagsLabel")),1)]),t("div",Uo,[K(t("select",{id:"action-attribute",class:"form-select","onUpdate:modelValue":f[2]||(f[2]=u=>e.value.attribute=u)},[(h(!0),b(M,null,D(l.value,u=>(h(),b("option",{key:u.value,value:u.value,selected:e.value.attribute===u.value},v(u.text),9,zo))),128))],512),[[Be,e.value.attribute]]),t("label",Fo,v(p(i)("actionModal.attributeLabel")),1)]),t("div",qo,[K(t("input",{type:"text",class:"form-control",id:"action-roll",placeholder:p(i)("actionModal.rollPlaceholder"),"onUpdate:modelValue":f[3]||(f[3]=u=>e.value.notation=u),value:e.value.notation},null,8,Go),[[Z,e.value.notation]]),t("label",Yo,v(p(i)("actionModal.rollLabel")),1)]),t("div",Jo,[t("div",Xo,[t("input",{class:"form-check-input",type:"checkbox",value:"",id:"action-includeAttributeDiceToRoll",checked:e.value.includeAttributeDiceToRoll},null,8,Zo),t("label",Qo,v(r.$t("actionModal.includeAttributeDiceToRollLabel")),1)]),t("label",{id:"checkIncludeAttributeDiceToRollHelp",for:"action-includeAttributeDiceToRoll",class:"form-text",innerHTML:r.$t("actionModal.includeAttributeDiceToRollHelp")},null,8,en)])]))}};function on(o){const s=F.global.t("diceShort");return new RegExp(`^([+-]?\\d*${s}\\d+|[+-]?\\d+)([+-]?\\d*${s}\\d+|[+-]?\\d+)*$`,"i").test(o)}function nn(o){const s=F.global.t("diceShort"),n=new RegExp(`([+-]?\\d*${s}\\d+|[+-]?\\d+)`,"gi"),i=o.match(n);return i?i.map(l=>{const r=new RegExp(`(\\d*)${s}(\\d+)`,"i"),f=l.match(r);return f?{type:"dice",count:f[1]?parseInt(f[1],10):1,sides:parseInt(f[2],10)}:{type:"bonus",bonus:parseInt(l,10)}}):[]}const ln={class:"d-flex flex-row justify-content-center align-items-center gap-2 mb-3"},sn={class:"list-group"},rn=["onClick","onContextmenu"],an={class:"action__name"},cn={class:"action__tags"},un={key:0,class:"d-flex flex-wrap gap-2"},dn={class:"action__attribute"},mn={class:"d-flex flex-row align-items-center gap-2"},fn={class:"action__roll"},pn={class:"d-flex flex-column"},hn={class:"d-flex flex-row gap-2"},bn={key:0},vn={class:"action__buttons"},gn=["onClick"],yn=["onClick"],_n={__name:"HeroActions",props:{hero:{type:Object,required:!0}},emits:["add:action","update:action","delete:action"],setup(o,{emit:s}){const n=o,i=s,{t:e}=j(),{openRollContextMenu:l}=se(),r=B(()=>{const c={};for(const[m,a]of Object.entries(n.hero.attributes)){const{notation:y}=re(a);c[m]=y}return c}),f=(c,m={})=>{Ao(c,n.hero.attributes[c.attribute],m)},u=(c,m)=>{l(c,y=>{f(m,y)},{includeFollowUpOption:!0})};function k(){const c={id:$e(),name:e("actionModal.defaultName"),tags:[],attribute:Object.keys(pe)[0],includeAttributeDiceToRoll:!0,roll:[],notation:`1${e("diceShort")}4`};g(c,!0)}function g(c,m=!1){const a={...c},y=m?e("actionModal.newTitle"):e("actionModal.editTitle",{name:a.name}),$=ie(tn,{initialAction:a});N.fire({title:y,html:$,confirmButtonColor:"var(--bs-success)",confirmButtonText:e("save"),showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:e("cancel"),preConfirm:()=>{const T=document.getElementById("action-name").value,x=document.getElementById("action-tags").value.split(",").map(ae=>ae.trim()).filter(ae=>ae!==""),_=document.getElementById("action-attribute").value,A=document.getElementById("action-includeAttributeDiceToRoll").checked,C=document.getElementById("action-roll").value;if(!on(C))return N.showValidationMessage(e("actionModal.invalidRollNotation")),!1;const E=nn(C);return{name:T,tags:x,attribute:_,includeAttributeDiceToRoll:A,notation:C,roll:E}}}).then(T=>{if(T.isConfirmed){const x={...a,...T.value};n.hero.actions.some(_=>_.id===x.id)?i("update:action",x):i("add:action",x)}})}function d(c){n.hero.actions.findIndex(a=>a.id===c.id)!==-1&&N.fire({title:e("deleteAction.title",{name:c.name}),text:e("deleteAction.text"),icon:"warning",confirmButtonText:e("delete"),confirmButtonColor:"var(--bs-primary)",showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:e("cancel")}).then(a=>{a.isConfirmed&&(i("delete:action",c.id),N.fire({title:e("deleteAction.deletedModal.title",{name:c.name}),html:e("deleteAction.deletedModal.text"),icon:"success",timer:2e3,timerProgressBar:!0,confirmButtonText:e("close"),confirmButtonColor:"var(--bs-primary)"}))})}return(c,m)=>(h(),b(M,null,[t("div",ln,[t("h2",null,v(p(e)("hero.weapons&actions")),1),t("button",{class:"btn btn-primary",onClick:O(k,["stop"])},[w(p(R),{icon:["fas","fa-plus"],"fixed-width":""})])]),t("div",sn,[(h(!0),b(M,null,D(o.hero.actions,a=>(h(),b("div",{key:`weapon_${a.id}`,class:"action",onClick:y=>f(a),onContextmenu:y=>u(y,a)},[t("div",an,[w(p(R),{icon:["fas","fa-dice"],"fixed-width":"",class:"text-primary"}),t("h3",null,v(a.name),1)]),t("div",cn,[a.tags&&a.tags.length>0?(h(),b("div",un,[(h(!0),b(M,null,D(a.tags,(y,$)=>(h(),b("span",{class:"badge rounded-pill text-bg-dark",key:`weapon_${a.id}_tag_${$}`},v(y),1))),128))])):L("",!0)]),t("div",dn,[t("div",mn,[t("b",{style:I({color:p(P)[a.attribute]})},v(p(e)(`attribute.${a.attribute}Short`)),5),t("span",null,v(r.value[a.attribute]),1)])]),t("div",fn,[t("div",pn,[t("div",hn,[t("b",null,v(p(e)("roll")),1),t("span",null,v(a.notation),1)]),a.includeAttributeDiceToRoll?(h(),b("span",bn,v(c.$t("action.includeAttributeDiceToRoll")),1)):L("",!0)])]),t("div",vn,[t("button",{class:"btn btn-dark",onClick:O(y=>g(a),["stop"])},[w(p(R),{icon:["fas","fa-edit"],"fixed-width":""})],8,gn),t("button",{class:"btn btn-danger",onClick:O(y=>d(a),["stop"])},[w(p(R),{icon:["fas","fa-trash"],"fixed-width":""})],8,yn)])],40,rn))),128))])],64))}},xn={class:"attributes"},kn=["onClick","onContextmenu"],$n={class:"input-group"},Cn=["onClick"],wn=["value","onInput"],Mn={__name:"HeroAttributes",props:{hero:{type:Object,required:!0}},emits:["update:attribute"],setup(o,{emit:s}){const n=o,i=s,{openRollContextMenu:e}=se(),l=B(()=>{const g={};for(const[d,c]of Object.entries(n.hero.attributes)){const{dice:m,bonus:a,pool:y,notation:$}=re(c);g[d]={name:d,value:c,dice:m,bonus:a,pool:y,notation:$}}return g});function r(g,d={}){Mo(g,d)}function f(g,d){e(g,c=>{r(d,c)})}function u(g,d){const c=Number(d.target.value);i("update:attribute",g,c)}function k(g){const d=n.hero.attributes[g]+5;i("update:attribute",g,d)}return(g,d)=>(h(),b("div",xn,[(h(!0),b(M,null,D(l.value,(c,m)=>(h(),b("div",{key:m,class:"attribute"},[t("button",{class:"btn btn-link d-flex flex-row w-100 gap-2 align-items-center text-decoration-none",onClick:O(a=>r(c),["prevent"]),onContextmenu:a=>f(a,c)},[t("span",{class:"attribute--hover-background",style:I({backgroundColor:p(P)[m]})},null,4),w(p(R),{icon:["fas","fa-dice"],"fixed-width":"",class:"text-primary"}),t("b",{style:I({color:p(P)[m]})},v(g.$t(`attribute.${m}`)),5)],40,kn),t("div",$n,[t("button",{class:"btn btn-outline-primary",onClick:O(a=>k(m),["prevent"])}," +5 ",8,Cn),t("input",{type:"number",value:o.hero.attributes[m],onInput:a=>u(m,a),class:"form-control form-control-sm"},null,40,wn)]),t("span",null,v(c.notation),1)]))),128))]))}},Tn={class:"form-floating"},An=["placeholder","value"],Ln={for:"hero:name"},Hn={__name:"HeroInfo",props:{hero:{type:Object,required:!0}},emits:["update:name"],setup(o,{emit:s}){const n=s;fe();function i(e){const l=e.target.value;l.trim()&&n("update:name",l.trim())}return(e,l)=>(h(),b("div",null,[t("div",Tn,[t("input",{type:"text",class:"form-control",id:"hero:name",placeholder:e.$t("hero.name.placeholder"),value:o.hero.name,onInput:i},null,40,An),t("label",Ln,v(e.$t("hero.name.label")),1)])]))}},Rn={class:"d-flex flex-column flex-md-row justify-content-between gap-3"},Dn={class:"list-group"},Sn={class:"list-group-item"},Pn={class:"list-group-item d-flex flex-row gap-2 align-items-center"},En={class:"list-group"},Bn={class:"list-group-item"},Nn={class:"list-group-item d-flex flex-column"},In={__name:"HeroStats",props:{hero:{type:Object,required:!0}},setup(o){const n=o.hero;return(i,e)=>(h(),b("div",Rn,[t("div",Dn,[e[3]||(e[3]=t("div",{class:"list-group-item list-group-item-danger"},"Trefferpunkte",-1)),t("div",Sn,[K(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=l=>p(n).currentHitPoints=l)},null,512),[[Z,p(n).currentHitPoints]])]),t("div",Pn,[t("b",null,"Max: "+v(p(n).maxHitPoints),1),e[2]||(e[2]=t("small",null,"erholt: +10",-1))])]),t("div",En,[e[4]||(e[4]=t("div",{class:"list-group-item list-group-item-primary"},"Mana",-1)),t("div",Bn,[K(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=l=>p(n).currentManaPoints=l)},null,512),[[Z,p(n).currentManaPoints]])]),t("div",Nn,[t("b",null,"Max: "+v(p(n).maxManaPoints),1)])])]))}},On={key:0},Vn={class:"d-flex flex-row justify-content-between align-items-center"},jn={class:"d-flex align-items-center"},Wn={class:"d-flex gap-2"},Kn={class:"hero"},Un={class:"hero__info"},zn={class:"hero__stats"},Fn={class:"hero__attributes"},qn={class:"hero__abilities"},Gn={class:"hero__actions"},Yn={key:1},Jn={class:"alert alert-warning"},Xn={__name:"HeroesDetailView",setup(o){const s=ge(),{showDeleteHeroModal:n}=ke(),i=fe(),e=B(()=>s.params.id),l=B(()=>i.getHeroById(e.value)||null);function r(){l.value&&n(l.value,()=>{i.deleteHero(l.value),ve.push({name:"heroes.list"})})}function f(m){m&&(l.value.name=m)}function u(m,a){l.value.attributes[m]=Number(a)}function k(m,a){const y=l.value.abilities.find($=>$.name===m);y&&(y.honeLevel=a)}function g(m){l.value.actions.push(m)}function d(m){const a=l.value.actions.findIndex(y=>y.id===m.id);a!==-1&&(l.value.actions[a]=m)}function c(m){const a=l.value.actions.findIndex(y=>y.id===m);a!==-1&&l.value.actions.splice(a,1)}return(m,a)=>{const y=ne("RouterLink");return l.value?(h(),b("div",On,[t("div",Vn,[t("div",jn,[w(y,{to:{name:"heroes.list"},class:"btn btn-link",title:"zurück"},{default:z(()=>[w(p(R),{icon:["fas","fa-chevron-left"],"fixed-width":""})]),_:1}),t("h1",null,v(l.value.name),1)]),t("div",Wn,[t("button",{class:"btn btn-danger",onClick:r,title:"wech damit"},[w(p(R),{icon:["fas","fa-trash"],"fixed-width":""})])])]),a[1]||(a[1]=t("hr",null,null,-1)),t("div",Kn,[t("div",Un,[w(Hn,{hero:l.value,"onUpdate:name":f},null,8,["hero"])]),t("div",zn,[w(In,{hero:l.value},null,8,["hero"])]),t("div",Fn,[w(Mn,{hero:l.value,"onUpdate:attribute":u},null,8,["hero"])]),t("div",qn,[w(No,{hero:l.value,"onUpdate:abilityHoneLevel":k},null,8,["hero"])]),t("div",Gn,[w(_n,{hero:l.value,"onAdd:action":g,"onUpdate:action":d,"onDelete:action":c},null,8,["hero"])]),a[0]||(a[0]=t("div",{class:"hero__talents"},null,-1))])])):(h(),b("div",Yn,[t("div",Jn,[t("h1",null,v(m.$t("heroNotFound.title")),1),t("span",null,[S(v(m.$t("heroNotFound.text")),1),a[2]||(a[2]=t("br",null,null,-1)),w(y,{class:"alert-link",to:{name:"heroes.list"}},{default:z(()=>[S(v(m.$t("heroesList.navigateTo")),1)]),_:1})])])]))}}},Zn=[{path:"/",name:"home",component:ht},{path:"/heroes",name:"heroes",redirect:{name:"heroes.list"},children:[{path:"",name:"heroes.list",component:Ct},{path:":id",name:"heroes.detail",component:Xn,props:!0,meta:{mainClass:"container-fluid"}}]}],ve=Ne({history:Ie("/gothic-tales/"),routes:Zn});var Qn=We();const U=xe(Qn);U.setDriver([U.INDEXEDDB,U.LOCALSTORAGE,U.WEBSQL]).then(()=>{console.debug("[PiniaPersistPlugin] LocalForage drivers set: IndexedDB prioritized.")}).catch(o=>{console.error("[PiniaPersistPlugin] Failed to set LocalForage drivers:",o)});function el(o,s){let n;return function(...e){const l=this,r=function(){n=null,o.apply(l,e)};clearTimeout(n),n=setTimeout(r,s)}}function tl(o={}){const{baseKey:s="pinia",keySeparator:n="-",suffix:i="data",defaultDebounceDelay:e=300,excludePathsOnAutoPersist:l=["loaded"]}=o;return async({store:r,options:f})=>{const u=f?.persist;if(!u)return;const{key:k,paths:g,serializer:d=_=>JSON.stringify(_),deserializer:c=_=>JSON.parse(_),debounce:m=e,customKeyBuilder:a}=typeof u=="object"?u:{};let y;g!==void 0?y=g:y=Object.keys(r.$state).filter(_=>!l.includes(_));const T=(()=>{if(a)return a({baseKey:s,storeId:r.$id,separator:n,suffix:i,storeSpecificKey:k});const _=typeof k=="function"?k(r.$id):k||r.$id;return`${s}${n}${_}${n}${i}`})();try{const _=await U.getItem(T);if(_){const A=c(_),C={};y.forEach(E=>{A&&typeof A=="object"&&A.hasOwnProperty(E)&&(C[E]=A[E])}),r.$patch(C)}}catch(_){console.error(`[PiniaPersistPlugin] Error loading store '${r.$id}' (Key: ${T}) from IndexDB:`,_)}finally{r.hasOwnProperty("loaded")&&(r.loaded=!0)}const x=el(_=>{try{const A=d(_);U.setItem(T,A)}catch(A){console.error(`[PiniaPersistPlugin] Error saving store '${r.$id}' (Key: ${T}) to IndexDB:`,A)}},m);r.$subscribe((_,A)=>{const C={};y.forEach(E=>{A.hasOwnProperty(E)?C[E]=Oe(A[E]):console.warn(`[PiniaPersistPlugin] Path '${E}' in store '${r.$id}' not found. Will not be persisted.`)}),x(C)})}}const Ae=Ve(),ol=tl({baseKey:"gothic_tales"});Ae.use(ol);Ke.add(Ue,ze,Fe,qe,Ge,Ye);const ee=_e(mt);ee.component("font-awesome-icon",R);ee.use(ve);ee.use(Ae);ee.use(F);ee.mount("#app");
