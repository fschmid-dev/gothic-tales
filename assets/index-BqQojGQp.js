import{a as b,b as t,e as w,f as z,r as ne,o as h,g as D,i as V,u as j,c as B,w as me,m as Le,j as L,k as p,F as M,l as S,t as v,n as I,p as ge,q as oe,T as He,s as ye,v as Re,x as Se,y as O,z as De,A as _e,h as Pe,B as Ee,C as K,D as Z,E as Be,G as Ne,H as Ie,I as Oe,J as Ve}from"./vue-DrhbM47G.js";import{F as R,S as N,r as je,g as xe,a as We,l as Ke,f as Ue,b as ze,c as Fe,d as qe,e as Ge,h as Je}from"./libraries-BRcsaPPZ.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();const se=(o,l)=>{const s=o.__vccOpts||o;for(const[i,e]of l)s[i]=e;return s},Ye={},Xe={id:"header",class:"mb-2 bg-dark"},Ze={class:"container"},Qe={class:"d-flex justify-content-between navbar navbar-dark navbar-expand align-items-center"},et={id:"navbar-default",class:"navbar-nav"},tt={class:"nav-item"};function ot(o,l){const s=ne("router-link");return h(),b("header",Xe,[t("div",Ze,[t("nav",Qe,[l[1]||(l[1]=t("a",{href:"#",class:"navbar-brand d-flex flex-column align-items-center"},[t("span",null,"Test")],-1)),t("ul",et,[t("li",tt,[w(s,{to:{name:"heroes.list"},class:"nav-link"},{default:z(()=>l[0]||(l[0]=[D(" Heroes ")])),_:1,__:[0]})])])])])])}const nt=se(Ye,[["render",ot]]),q=V(!1),ce=V({}),W=V({x:0,y:0}),G=V(null),H=V({rollType:"normal",modifierValue:0,attackRollType:null});let J=null,Y=null,X=null;function le(){const{t:o}=j(),l=()=>{H.value={rollType:"normal",modifierValue:0,attackRollType:null}},s=()=>[{label:o("contextMenu.normalRoll"),key:"rollType",value:"normal"},{label:o("contextMenu.advantageRoll"),key:"rollType",value:"advantage"},{label:o("contextMenu.disadvantageRoll"),key:"rollType",value:"disadvantage"}],i=B(()=>{if(H.value.rollType==="normal")return[];const g=H.value.rollType;let m=1;return g==="disadvantage"&&(m=-1),[{label:o("contextMenu.modifierSmall",{value:2*m}),key:"modifierValue",value:2*m},{label:o("contextMenu.modifierMedium",{value:5*m}),key:"modifierValue",value:5*m},{label:o("contextMenu.modifierLarge",{value:8*m}),key:"modifierValue",value:8*m}]}),e=()=>[{label:o("contextMenu.followUpAttack"),key:"attackRollType",value:"followUp"}],n=()=>{if(!q.value)return;const g=document.getElementById("context-menu-container");if(!g)return;const m=g.offsetWidth,a=g.offsetHeight,f=window.innerWidth,c=window.innerHeight;let _=W.value.x,$=W.value.y;_+m>f&&(_=f-m-10),_<0&&(_=10),$+a>c&&($=c-a-10),$<0&&($=10),W.value={x:_,y:$}},r=(g,m=null,a={},f={})=>{g.preventDefault(),l(),Object.assign(H.value,f),Object.assign(ce.value,a),q.value=!0,G.value=m?Le(m):null,W.value={x:g.clientX,y:g.clientY},setTimeout(()=>{n(),J=c=>{const _=document.getElementById("context-menu-container");_&&!_.contains(c.target)&&d()},Y=c=>{const _=document.getElementById("context-menu-container");_&&!_.contains(c.target)&&d()},X=c=>{c.key==="Escape"&&d()},document.addEventListener("click",J,!0),document.addEventListener("contextmenu",Y,!0),document.addEventListener("keydown",X)},50)},d=()=>{q.value=!1,ce.value={},W.value={x:0,y:0},G.value=null,l(),J&&(document.removeEventListener("click",J,!0),J=null),Y&&(document.removeEventListener("contextmenu",Y,!0),Y=null),X&&(document.removeEventListener("keydown",X),X=null)},u=(g,m)=>{const a=H.value.rollType;g==="rollType"&&m==="normal"?H.value.modifierValue=0:g==="rollType"&&m!=="normal"&&H.value.modifierValue===0&&(H.value.modifierValue=m==="advantage"?2:-2),g==="attackRollType"?H.value.attackRollType===m?H.value.attackRollType=null:H.value.attackRollType=m:H.value[g]=m,g==="rollType"&&H.value.rollType!==a&&setTimeout(n,0)},k=()=>{G.value&&G.value({...H.value}),d()};return me(q,g=>{g?window.addEventListener("resize",n):window.removeEventListener("resize",n)}),{isContextMenuOpen:q,contextMenuConfig:ce,contextMenuCallback:G,contextMenuPosition:W,selectedModifiers:H,openRollContextMenu:r,closeContextMenu:d,selectOption:u,triggerRoll:k,getRollTypeOptions:s,getModifierValueOptions:i,getAttackRollOptions:e}}const st=["onClick"],lt={key:0,class:"ms-2"},it=["onClick"],rt={key:0,class:"ms-2"},at=["onClick"],ct={key:0,class:"ms-2"},ut={__name:"ContextMenu",setup(o){const{isContextMenuOpen:l,contextMenuConfig:s,contextMenuPosition:i,selectedModifiers:e,selectOption:n,triggerRoll:r,getRollTypeOptions:d,getModifierValueOptions:u,getAttackRollOptions:k}=le(),{t:g}=j(),m=T=>({left:`${T.x}px`,top:`${T.y}px`,position:"fixed",backgroundColor:"#333",border:"1px solid #555",borderRadius:"4px",boxShadow:"0 2px 10px rgba(0,0,0,0.5)",zIndex:1e3,padding:"5px 0",minWidth:"150px",listStyle:"none",margin:0}),a={padding:"8px 15px",cursor:"pointer",color:"#eee",backgroundColor:"transparent"},f={backgroundColor:"#555"},c={borderTop:"1px solid #555",margin:"5px 0"},_={borderTop:"3px double #555",margin:"5px 0"},$=(T,x)=>e.value[T]===x;return(T,x)=>p(l)?(h(),b("ul",{key:0,style:I(m(p(i))),id:"context-menu-container"},[(h(!0),b(M,null,S(p(d)(),(y,A)=>(h(),b("li",{key:`roll-type-${A}`,style:a,onClick:C=>p(n)(y.key,y.value),onMouseover:x[0]||(x[0]=C=>C.currentTarget.style.backgroundColor=f.backgroundColor),onMouseleave:x[1]||(x[1]=C=>C.currentTarget.style.backgroundColor=a.backgroundColor)},[D(v(y.label)+" ",1),$(y.key,y.value)?(h(),b("span",lt,[w(p(R),{icon:["fas","fa-check"]})])):L("",!0)],40,st))),128)),p(u).length>0?(h(),b(M,{key:0},[t("li",{style:c}),(h(!0),b(M,null,S(p(u),(y,A)=>(h(),b("li",{key:`mod-value-${A}`,style:a,onClick:C=>p(n)(y.key,y.value),onMouseover:x[2]||(x[2]=C=>C.currentTarget.style.backgroundColor=f.backgroundColor),onMouseleave:x[3]||(x[3]=C=>C.currentTarget.style.backgroundColor=a.backgroundColor)},[D(v(y.label)+" ",1),$(y.key,y.value)?(h(),b("span",rt,[w(p(R),{icon:["fas","fa-check"]})])):L("",!0)],40,it))),128))],64)):L("",!0),p(s).includeFollowUpOption?(h(),b(M,{key:1},[t("li",{style:c}),(h(!0),b(M,null,S(p(k)(),(y,A)=>(h(),b("li",{key:`attack-roll-${A}`,style:a,onClick:C=>p(n)(y.key,y.value),onMouseover:x[4]||(x[4]=C=>C.currentTarget.style.backgroundColor=f.backgroundColor),onMouseleave:x[5]||(x[5]=C=>C.currentTarget.style.backgroundColor=a.backgroundColor)},[D(v(y.label)+" ",1),$(y.key,y.value)?(h(),b("span",ct,[w(p(R),{icon:["fas","fa-check"]})])):L("",!0)],40,at))),128))],64)):L("",!0),t("li",{style:_}),t("li",{style:I({...a,textAlign:"center",fontWeight:"bold"}),onClick:x[6]||(x[6]=(...y)=>p(r)&&p(r)(...y)),onMouseover:x[7]||(x[7]=y=>y.currentTarget.style.backgroundColor=f.backgroundColor),onMouseleave:x[8]||(x[8]=y=>y.currentTarget.style.backgroundColor=a.backgroundColor)},[D(v(p(g)("contextMenu.rollButton"))+" ",1),w(p(R),{icon:["fas","fa-dice"]})],36)],4)):L("",!0)}},dt=se(ut,[["__scopeId","data-v-d1e7517b"]]),mt={__name:"App",setup(o){const l=ge(),s=V("container"),i=B(()=>l.meta.mainClass||"container"),e=V("fade-left");me(()=>l.fullPath,(r,d)=>{const u=r.split("/").filter(Boolean).length,k=d.split("/").filter(Boolean).length;u<k?e.value="fade-right":e.value="fade-left"});function n(){s.value=i.value}return(r,d)=>{const u=ne("RouterView");return h(),b(M,null,[w(nt),w(dt),w(u,null,{default:z(({Component:k})=>[t("main",{class:oe(["my-3",s.value])},[w(He,{name:e.value,mode:"out-in",onAfterLeave:n,onBeforeEnter:n},{default:z(()=>[(h(),ye(Re(k)))]),_:2},1032,["name"])],2)]),_:1})],64)}}},ft={};function pt(o,l){return h(),b("h1",null,"Test")}const ht=se(ft,[["render",pt]]),fe=Se("hero",{state:()=>({heroes:[],loaded:!1}),persist:{key:"heroes",paths:["heroes"]},getters:{getHeroes:o=>o.heroes,getHeroById:o=>l=>o.heroes.find(s=>s.id===l)},actions:{saveHero(o){const l=this.heroes.findIndex(s=>s.id===o.id);l!==-1?this.heroes[l]=o:this.heroes.push(o)},deleteHero(o){const l=this.heroes.findIndex(s=>s.id===o.id);l!==-1&&this.heroes.splice(l,1)}}});function ke(){const{t:o}=j();return{showDeleteHeroModal:(s,i)=>{N.fire({title:o("deleteHero.title",{name:s.name}),text:o("deleteHero.text"),icon:"warning",confirmButtonText:o("delete"),confirmButtonColor:"var(--bs-primary)",showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:o("cancel"),preConfirm:()=>{i&&i(),N.fire({title:o("deleteHero.deletedModal.title",{name:s.name}),html:o("deleteHero.deletedModal.text"),icon:"success",timer:2e3,timerProgressBar:!0,confirmButtonText:o("close")})}})}}}function $e(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():(console.warn("crypto.randomUUID() not available, falling back to Date.now() for ID generation."),Date.now())}class bt{id;name;attributes={strength:1,dexterity:1,endurance:1,concentration:1,intuition:1,experience:1};abilities=[];maxHitPoints=0;currentHitPoints=0;constructor(l,s=null,i=null){this.id=$e(),this.name=l,s&&(this.attributes=s),i&&(this.abilities=i)}}const pe={strength:10,dexterity:10,endurance:10,concentration:10,intuition:10,experience:10},vt=[{name:"endure",attributes:["concentration","endurance"],honeLevel:0,category:"body"},{name:"moveObject",attributes:["strength","endurance"],honeLevel:0,category:"body"},{name:"jumpingClimbing",attributes:["strength","dexterity"],honeLevel:0,category:"body"},{name:"agility",attributes:["dexterity","experience"],honeLevel:0,category:"body"},{name:"stealth",attributes:["dexterity","intuition"],honeLevel:0,category:"body"},{name:"persuade",attributes:["concentration","intuition"],honeLevel:0,category:"social"},{name:"intimidate",attributes:["concentration","strength"],honeLevel:0,category:"social"},{name:"deceive",attributes:["dexterity","intuition"],honeLevel:0,category:"social"},{name:"insight",attributes:["intuition","experience"],honeLevel:0,category:"social"},{name:"perceive",attributes:["strength","endurance"],honeLevel:0,category:"senses"},{name:"rememberingReflectionResearch",attributes:["intuition","experience"],honeLevel:0,category:"senses"},{name:"magicSense",attributes:["concentration","experience"],honeLevel:0,category:"senses"}];class gt extends bt{level=1;learningPoints=10;actions=[];maxManaPoints=0;currentManaPoints=0;constructor(l,s=pe,i=vt){super(l,s,i)}}const yt={class:"d-flex justify-content-between align-items-center"},_t={class:"list-group"},xt={class:"d-flex flex-column gap-2"},kt={class:"d-flex flex-row align-items-baseline gap-2"},$t=["onClick"],Ct={__name:"HeroesListView",setup(o){const l=fe(),{showDeleteHeroModal:s}=ke(),{t:i}=j(),e=B(()=>l.getHeroes.sort((k,g)=>k.name.toLowerCase().localeCompare(g.name.toLowerCase())));function n(){N.fire({title:i("createHero.title"),html:i("createHero.html"),icon:"question",input:"text",inputValue:i("createHero.defaultValue"),inputPlaceholder:i("createHero.placeholder"),inputAutoTrim:!0,inputAutoFocus:!0,inputAttributes:{autocapitalize:"off"},confirmButtonColor:"var(--bs-success)",confirmButtonText:i("create"),showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:i("cancel"),preConfirm:r})}function r(u){if(u=u.toString(),!u||u.length===0||u.toLowerCase()===i("createHero.namelessHero.name").toLowerCase()){N.fire({icon:"error",title:i("error"),html:i("createHero.namelessHero.html"),confirmButtonText:i("back"),confirmButtonColor:"var(--bs-primary)",preConfirm:()=>{n()}});return}try{const k=new gt(u);l.saveHero(k),ve.push({name:"heroes.detail",params:{id:k.id}})}catch(k){N.fire({icon:"error",title:"error",html:k.message,confirmButtonText:i("back"),confirmButtonColor:"var(--bs-primary)",preConfirm:()=>{n()}})}}function d(u){s(u,()=>{l.deleteHero(u)})}return(u,k)=>{const g=ne("RouterLink");return h(),b("div",null,[t("div",yt,[t("h1",null,v(u.$t("heroesList.headline")),1),t("button",{class:"btn btn-secondary",onClick:n},v(u.$t("new")),1)]),k[0]||(k[0]=t("hr",null,null,-1)),t("div",_t,[(h(!0),b(M,null,S(e.value,m=>(h(),ye(g,{key:`hero_${m.name}`,to:{name:"heroes.detail",params:{id:m.id}},class:"list-group-item list-group-item-action d-flex flex-row justify-content-between align-items-center"},{default:z(()=>[t("div",xt,[t("div",kt,[t("h2",null,v(m.name),1),t("span",null," ("+v(u.$t("hero.level"))+": "+v(m.level)+" "+v(u.$t("hero.learningPointsShort"))+": "+v(m.learningPoints)+") ",1)])]),t("div",null,[t("button",{class:"btn btn-danger",onClick:O(a=>d(m),["prevent"])},v(u.$t("delete")),9,$t)])]),_:2},1032,["to"]))),128))])])}}},P={strength:"red",dexterity:"green",endurance:"darkgoldenrod",concentration:"blue",intuition:"purple",experience:"gray"},wt={body:"Körper",other:"Andere",senses:"Sinne",social:"Sozial",endure:"Durchhalten",moveObject:"Objekte bewegen",jumpingClimbing:"Springen/Klettern",agility:"Gewandtheit",stealth:"Heimlichkeit",persuade:"Überreden",intimidate:"Einschüchtern",deceive:"Betrügen",insight:"Menschenkenntnis",perceive:"Wahrnehmen",rememberingReflectionResearch:"Erinnern/Erwägen/Erforschen",magicSense:"Magiegespür"},Mt={includeAttributeDiceToRoll:"+ Attributswürfel"},Tt={attributeLabel:"Attribut",rollLabel:"Wurf",rollPlaceholder:"1W6",defaultName:"Volles Pfund aufs Maul!",editTitle:'"{name}"<br>bearbeiten',includeAttributeDiceToRollHelp:"Wenn aktiv, wird der Attributswurf (ohne den W20) zum Wurf hinzugefügt.",includeAttributeDiceToRollLabel:"Attributswurf zu dem Wurf hinzufügen?",invalidRollNotation:"Ungültige Wurf-Notation. Bitte das Format 'xWy+z' verwenden.",nameLabel:"Name",namePlaceholder:"Der Name der Waffe/Aktion",newTitle:"Neue Waffe/Aktion anlegen",tagsLabel:"Eigenschaften/Merkmale",tagsPlaceholder:"Eigenschaften/Merkmale (per Komma getrennt)"},At={name:"Gothic Tales"},Lt="Angriffswurf",Ht={followUp:"(2W20kl)"},Rt={concentration:"Konzentration",concentrationShort:"Konz",dexterity:"Geschicklichkeit",dexterityShort:"Ge",intuition:"Intuition",intuitionShort:"Intu",endurance:"Ausdauer",enduranceShort:"Ausd",experience:"Erfahrung",experienceShort:"Erf",strength:"Stärke",strengthShort:"St"},St="Zurück",Dt="Abbrechen",Pt={normalRoll:"Normaler Wurf",advantageRoll:"Wurf mit Vorteil",disadvantageRoll:"Wurf mit Nachteil",modifierSmall:"Klein ({value})",modifierMedium:"Mittel ({value})",modifierLarge:"Groß ({value})",attackRollOptions:"Angriffsoptionen",followUpAttack:"Folgeangriff",rollButton:"Würfeln"},Et="Erstellen",Bt={defaultValue:"Neuer Held",html:"Bitte den Namen des Helden eingeben.<br><small><i>Der Namenlose Held ist nicht erlaubt</i> 😜</small>",placeholder:"Name des Helden",title:"Neuen Held erstellen",namelessHero:{name:"Namenlose Held",html:"Wie gesagt, du bist <b>nicht</b> der Namenlose Held!"}},Nt="Schließen",It="Wurf",Ot={text:"Diese Aktion kann nicht mehr rückgängig gemacht werden!",title:'"{name}"<br>wirklich löschen?',deletedModal:{text:"War sowieso nur Schrott!",title:'"{name}"<br>wurde gelöscht'}},Vt={text:"Diese Aktion kann nicht mehr rückgängig gemacht werden!",title:'"{name}"<br>wirklich löschen?',deletedModal:{text:"Möge Innos der Seele gnädig sein.",title:'"{name}"<br>wurde gelöscht'}},jt="W",Wt="Fehler",Kt={ability:"Fähigkeit",abilities:"Fähigkeiten",attribute:"Attribut",attributes:"Attribute",learningPoints:"Lernpunkte",learningPointsShort:"LP",level:"Stufe",name:{label:"Name des Helden",placeholder:"Gib hier den Namen deines Helden an"},"weapons&actions":"Waffen & Aktionen"},Ut={headline:"Liste deiner Helden",navigateTo:"Zur Heldenliste"},zt={title:"Held nicht gefunden",text:"Der angefragte Held existiert nicht oder wurde gelöscht. Sie werden zur Heldenliste weitergeleitet."},Ft={level0:"ungeübt",level1:"geübt",level2:"gelehrt",level3:"gemeistert"},qt={advantage:"Vorteil",disadvantage:"Nachteil"},Gt="Speichern",Jt="Status",Yt="Summe: {sum}",Xt="Wert: {value}",Zt={abilities:wt,action:Mt,actionModal:Tt,app:At,attackRoll:Lt,attackType:Ht,attribute:Rt,back:St,cancel:Dt,contextMenu:Pt,create:Et,createHero:Bt,close:Nt,roll:It,delete:"Löschen",deleteAction:Ot,deleteHero:Vt,diceShort:jt,error:Wt,hero:Kt,heroesList:Ut,heroNotFound:zt,honeLevel:Ft,modifier:qt,new:"Neu",save:Gt,status:Jt,sum:Yt,valueDisplay:Xt},F=De({locale:"de",fallbackLocale:"de",messages:{de:Zt}});var Qt=je();const eo=xe(Qt),to={class:"d-flex flex-column"},oo=["innerHTML"],no={key:0,class:"toast-divider"},so={key:1,class:"toast-section-title"},lo={class:"d-flex flex-row align-items-center toast-rolls-container"},io={class:"d-flex flex-column align-items-center toast-roll-part"},ro={class:"toast-dice-notation"},ao={class:"toast-roll-values"},co={class:"toast-dice-notation"},uo={class:"toast-roll-values"},mo={class:"toast-bonus-notation"},fo={class:"toast-bonus-value"},po={class:"toast-modifier-notation"},ho={class:"toast-modifier-value"},bo={key:0,class:"toast-plus-sign"},vo={key:0,class:"text-end toast-section-sum"},go={class:"text-end toast-section-sum"},yo={key:2,class:"toast-footer-text"},_o=["innerHTML"],xo={__name:"DiceRollToastContent",props:{header:{type:String,required:!1,default:""},headerColor:{type:String,required:!1,default:"inherit"},sections:{type:Array,required:!0,default:()=>[]},sum:{type:Number,required:!1},footer:{type:String,required:!1,default:""}},setup(o){const{t:l}=j();return(s,i)=>(h(),b("div",to,[o.header?(h(),b("div",{key:0,style:I({color:o.headerColor}),class:"toast-header-text"},[t("span",{innerHTML:o.header},null,8,oo)],4)):L("",!0),(h(!0),b(M,null,S(o.sections,(e,n)=>(h(),b(M,{key:"section_"+n},[n>0?(h(),b("hr",no)):L("",!0),e.title?(h(),b("b",so,v(e.title),1)):L("",!0),t("div",lo,[(h(!0),b(M,null,S(e.parts,(r,d)=>(h(),b(M,{key:"section_"+n+"_part_"+d},[t("div",io,[r.item.type==="dice"?(h(),b(M,{key:0},[t("span",ro,v(r.item.count>1?r.item.count:"")+v(p(l)("diceShort"))+v(r.item.sides),1),t("span",ao,v(r.rolls.join("+")),1)],64)):L("",!0),r.item.type==="d20special"?(h(),b(M,{key:1},[t("span",co,v(p(l)(r.label)),1),t("span",uo,[i[0]||(i[0]=D(" (")),t("span",{class:oe({"toast-roll-selected":r.item.selected===0})},v(r.item.rolls[0]),3),i[1]||(i[1]=D("/")),t("span",{class:oe({"toast-roll-selected":r.item.selected===1})},v(r.item.rolls[1]),3),i[2]||(i[2]=D(") "))])],64)):r.item.type==="bonus"?(h(),b(M,{key:2},[t("span",mo,v(r.sum),1),t("span",fo,v(r.sum),1)],64)):r.item.type==="advantage"||r.item.type==="disadvantage"?(h(),b(M,{key:3},[t("span",po,v(p(l)(`modifier.${r.item.type}`)),1),t("span",ho,v(r.sum),1)],64)):L("",!0)]),d<e.parts.length-1?(h(),b("span",bo," + ")):L("",!0)],64))),128)),e.sum?(h(),b("b",vo,v(p(l)("sum",{sum:e.sum})),1)):L("",!0)])],64))),128)),o.sum?(h(),b(M,{key:1},[i[3]||(i[3]=t("hr",{class:"toast-divider"},null,-1)),t("b",go,v(p(l)("sum",{sum:o.sum})),1)],64)):L("",!0),o.footer?(h(),b("div",yo,[t("span",{innerHTML:o.footer},null,8,_o)])):L("",!0)]))}},he=se(xo,[["__scopeId","data-v-96f90f72"]]);function ie(o,l={}){const s=document.createElement("div"),i=_e({render:()=>Pe(o,l)});i.use(F),i.mount(s);const e=s.innerHTML;return i.unmount(),e}function de(o){if(!Array.isArray(o)||o.length===0)return;const l={pool:o,parts:[],sum:0};for(let s=0;s<o.length;s++){const i=o[s],e={item:i};switch(i.type){case"dice":let n=0;e.rolls=[];for(let r=0;r<i.count;r++){const d=te(i.sides);n+=d,e.rolls.push(d)}e.sum=n;break;case"bonus":e.sum=i.bonus;break;case"advantage":case"disadvantage":e.type=i.type,e.sum=i.value;break}l.sum+=e.sum,l.parts.push(e)}return l}function Ce(o,l={}){const s=o.slice();return s.unshift({type:"dice",count:1,sides:20}),l.rollType&&l.modifierValue!==0&&s.push({type:l.rollType,value:l.modifierValue}),de(s)}function te(o){return 1+Math.floor(Math.random()*o)}const we=[{id:0,i18nKey:"honeLevel.level0",notation:"",poolAdditions:[]},{id:1,i18nKey:"honeLevel.level1",notation:"2",poolAdditions:[{type:"bonus",bonus:2}]},{id:2,i18nKey:"honeLevel.level2",notation:"D4+2",poolAdditions:[{type:"dice",sides:4,count:1},{type:"bonus",bonus:2}]},{id:3,i18nKey:"honeLevel.level3",notation:"2D6+3",poolAdditions:[{type:"dice",sides:6,count:2},{type:"bonus",bonus:3}]}],Me=new Map(we.map(o=>[o.id,o])),ko={NONE:0},{t:Te}=F.global,ue=[2,4,6,8,10,12];function $o(o){const l={2:1};let s=o;for(;s>=10;){let i=!1;for(let e=ue.length-2;e>=0;e--){const n=ue[e];if(l[n]&&l[n]>0){l[n]--,l[n]===0&&delete l[n];const r=ue[e+1];l[r]=(l[r]||0)+1,i=!0;break}}i||l[12]&&l[12]>0&&(l[12]--,l[12]===0&&delete l[12],l[6]=(l[6]||0)+2,i=!0),i||(l[2]=(l[2]||0)+1),s-=10}return l}function Co(o){return Math.max(Math.floor((o-5)/10),0)}function wo(o,l,s){const i=Me.get(s);if(i&&i.poolAdditions.length>0){i.poolAdditions.forEach(n=>{o.push(n)});let e=i.notation;e=e.replace(/D/g,Te("diceShort")),l.push(e)}}function re(o,l=ko.NONE){const s=$o(o),i=Co(o),e=[],n=[];Object.keys(s).map(Number).sort((d,u)=>u-d).forEach(d=>{const u=String(d),k=s[u];e.push({type:"dice",sides:d,count:k}),n.push(`${k}${Te("diceShort")}${u}`)}),i>0&&(e.push({type:"bonus",bonus:i}),n.push(`${i}`)),wo(e,n,l);const r=n.filter(d=>d).join("+");return{dice:s,bonus:i,pool:e,notation:r}}const{t:Q}=F.global;function be(o,l={},s={}){const n={...{text:o,close:!0,html:!0,escapeMarkup:!1,className:"rounded",duration:-1},...l,style:{...{background:"var(--bs-body-bg)",color:"var(--bs-body-color)",border:"2px solid var(--bs-body-color)"},...s}},d=eo(n).showToast().toastElement;d.addEventListener("click",()=>{const u=d.querySelector(".toast-close");u&&u.click()})}function Mo(o,l){const s=Ce(o.pool,l),i=`<b>${Q("attribute."+o.name)}</b>`,e=[{parts:s.parts}],n=P[o.name],r=ie(he,{header:i,headerColor:n,sections:e,sum:s.sum});be(r,{},{borderColor:n})}function To(o,l){const s=Ce(o.pool,l);let i=`<b>${Q(`abilities.${o.name}`)}</b>`;if(o.honeLevel){const u=Me.get(o.honeLevel);u&&(i=`<span>${i} (${Q(u.i18nKey)})</span>`)}const e=[{parts:s.parts}],n=ie(he,{header:i,sections:e,sum:s.sum}),r=P[o.attributes[0]],d=P[o.attributes[1]];be(n,{},{borderTopColor:r,borderLeftColor:r,borderRightColor:d,borderBottomColor:d})}function Ao(o,l,s){const i=re(l);let e=[],n,r=-1;s.attackRollType==="followUp"?(e=[te(20),te(20)],n=Math.min(...e),r=e.indexOf(n)):(e=[te(20)],n=e[0],r=0);let d=i.pool.slice();s.rollType&&s.rollType!=="normal"&&s.modifierValue&&s.modifierValue!==0&&d.push({type:s.rollType,value:s.modifierValue});const u=de(d),k=n+u.sum,g=de(o.roll);let m;o.includeAttributeDiceToRoll?m=u.sum+g.sum:m=g.sum;const a=`<b>${o.name}</b>`;let f=[];e.length>1?f.push({item:{type:"d20special",rolls:e,selected:r},label:"attackType.followUp",rolls:e,sum:n}):f.push({item:{type:"dice",count:1,sides:20},rolls:[n],sum:n}),f.push(...u.parts);const c={title:Q("attackRoll"),parts:f,sum:k};let _;o.includeAttributeDiceToRoll?_=[...u.parts,...g.parts]:_=[...g.parts];const $={title:Q("roll"),parts:_,sum:m},x=ie(he,{header:a,sections:[c,$]});be(x,{},{borderColor:P[o.attribute]})}const Lo=["onClick","onKeydown","onContextmenu"],Ho={class:"ability__name"},Ro={class:"ability__hone-level"},So=["id","onChange","value"],Do=["value"],Po={class:"ability__attributes"},Eo={class:"ms-2"},Bo={class:"ability__notation"},No={__name:"HeroAbilities",props:{hero:{type:Object,required:!0}},emits:["update:abilityHoneLevel"],setup(o,{emit:l}){const s=o,i=l,{openRollContextMenu:e}=le(),{t:n}=j(),r=B(()=>we),d=B(()=>{const m={};return s.hero.abilities.forEach(a=>{const f=s.hero.attributes[a.attributes[0]],c=s.hero.attributes[a.attributes[1]],_=Math.floor((Number(f)+Number(c))/2),{dice:$,bonus:T,pool:x,notation:y}=re(_,a.honeLevel),A={...a,value:_,dice:$,bonus:T,pool:x,notation:y};m[a.category]||(m[a.category]=[]),m[a.category].push(A)}),m});function u(m,a){const f=Number(a.target.value);i("update:abilityHoneLevel",m,f)}function k(m,a={}){To(m,a)}function g(m,a){e(m,f=>{k(a,f)})}return(m,a)=>(h(!0),b(M,null,S(d.value,(f,c,_)=>(h(),b("div",{key:`abilities_${c}`,class:oe(["abilities list-group",{"mb-3":_<Object.keys(d.value).length-1}])},[(h(!0),b(M,null,S(f,($,T)=>(h(),b("div",{key:`ability_${c}_${T}`,class:"ability",tabindex:"0",onClick:O(x=>k($),["prevent"]),onKeydown:Ee(x=>k($),["enter"]),onContextmenu:x=>g(x,$),style:I({"--background-color-1":p(P)[$.attributes[0]],"--background-color-2":p(P)[$.attributes[1]]})},[t("div",Ho,[w(p(R),{icon:["fas","fa-dice"],"fixed-width":"",class:"text-primary"}),t("b",null,v(p(n)(`abilities.${$.name}`)),1)]),t("div",Ro,[t("select",{class:"form-select form-select-sm bg-white",id:`ability_${c}_${T}_honeLevel`,onClick:a[0]||(a[0]=O(()=>{},["stop"])),onChange:x=>u($.name,x),value:$.honeLevel},[(h(!0),b(M,null,S(r.value,x=>(h(),b("option",{key:`ability_${c}_${T}_honeLevel_${x.id}`,value:x.id},v(p(n)(x.i18nKey)),9,Do))),128))],40,So)]),t("div",Po,[t("span",null,[t("b",{style:I({color:p(P)[$.attributes[0]]})},v(p(n)(`attribute.${$.attributes[0]}Short`)),5),a[1]||(a[1]=D(" & ")),t("b",{style:I({color:p(P)[$.attributes[1]]})},v(p(n)(`attribute.${$.attributes[1]}Short`)),5),t("span",Eo," ("+v(p(n)("valueDisplay",{value:$.value}))+") ",1)])]),t("div",Bo,[t("span",null,v($.notation),1)])],44,Lo))),128))],2))),128))}},Io={class:"form-floating mb-3"},Oo=["placeholder","value"],Vo={for:"action-name"},jo={class:"form-floating mb-3"},Wo=["placeholder","value"],Ko={for:"action-tags"},Uo={class:"form-floating mb-3"},zo=["value","selected"],Fo={for:"action-attribute"},qo={class:"form-floating mb-3"},Go=["placeholder","value"],Jo={for:"action-roll"},Yo={class:"text-start"},Xo={class:"form-check form-switch"},Zo=["checked"],Qo={class:"form-check-label",for:"action-includeAttributeDiceToRoll"},en=["innerHTML"],tn={__name:"ActionEditForm",props:{initialAction:{type:Object,required:!0}},setup(o,{expose:l}){const s=o,{t:i}=j(),e=V({id:s.initialAction.id,name:s.initialAction.name,tags:s.initialAction.tags.join(", "),attribute:s.initialAction.attribute,includeAttributeDiceToRoll:s.initialAction.includeAttributeDiceToRoll,notation:s.initialAction.notation,roll:s.initialAction.roll}),n=B(()=>Object.keys(pe).map(r=>({value:r,text:i(`attribute.${r}`)})));return me(()=>s.initialAction,r=>{e.value={id:r.id,name:r.name,tags:r.tags.join(", "),attribute:r.attribute,includeAttributeDiceToRoll:r.includeAttributeDiceToRoll,notation:r.notation,roll:r.roll}},{deep:!0}),l({formData:e}),(r,d)=>(h(),b("div",null,[t("div",Io,[K(t("input",{type:"text",class:"form-control",id:"action-name",placeholder:p(i)("actionModal.namePlaceholder"),"onUpdate:modelValue":d[0]||(d[0]=u=>e.value.name=u),value:e.value.name},null,8,Oo),[[Z,e.value.name]]),t("label",Vo,v(p(i)("actionModal.nameLabel")),1)]),t("div",jo,[K(t("input",{type:"text",class:"form-control",id:"action-tags",placeholder:p(i)("actionModal.tagsPlaceholder"),"onUpdate:modelValue":d[1]||(d[1]=u=>e.value.tags=u),value:e.value.tags},null,8,Wo),[[Z,e.value.tags]]),t("label",Ko,v(p(i)("actionModal.tagsLabel")),1)]),t("div",Uo,[K(t("select",{id:"action-attribute",class:"form-select","onUpdate:modelValue":d[2]||(d[2]=u=>e.value.attribute=u)},[(h(!0),b(M,null,S(n.value,u=>(h(),b("option",{key:u.value,value:u.value,selected:e.value.attribute===u.value},v(u.text),9,zo))),128))],512),[[Be,e.value.attribute]]),t("label",Fo,v(p(i)("actionModal.attributeLabel")),1)]),t("div",qo,[K(t("input",{type:"text",class:"form-control",id:"action-roll",placeholder:p(i)("actionModal.rollPlaceholder"),"onUpdate:modelValue":d[3]||(d[3]=u=>e.value.notation=u),value:e.value.notation},null,8,Go),[[Z,e.value.notation]]),t("label",Jo,v(p(i)("actionModal.rollLabel")),1)]),t("div",Yo,[t("div",Xo,[t("input",{class:"form-check-input",type:"checkbox",value:"",id:"action-includeAttributeDiceToRoll",checked:e.value.includeAttributeDiceToRoll},null,8,Zo),t("label",Qo,v(r.$t("actionModal.includeAttributeDiceToRollLabel")),1)]),t("label",{id:"checkIncludeAttributeDiceToRollHelp",for:"action-includeAttributeDiceToRoll",class:"form-text",innerHTML:r.$t("actionModal.includeAttributeDiceToRollHelp")},null,8,en)])]))}};function on(o){const l=F.global.t("diceShort");return new RegExp(`^([+-]?\\d*${l}\\d+|[+-]?\\d+)([+-]?\\d*${l}\\d+|[+-]?\\d+)*$`,"i").test(o)}function nn(o){const l=F.global.t("diceShort"),s=new RegExp(`([+-]?\\d*${l}\\d+|[+-]?\\d+)`,"gi"),i=o.match(s);return i?i.map(n=>{const r=new RegExp(`(\\d*)${l}(\\d+)`,"i"),d=n.match(r);return d?{type:"dice",count:d[1]?parseInt(d[1],10):1,sides:parseInt(d[2],10)}:{type:"bonus",bonus:parseInt(n,10)}}):[]}const sn={class:"d-flex flex-row justify-content-center align-items-center gap-2 mb-3"},ln={class:"list-group"},rn=["onClick","onContextmenu"],an={class:"action__name"},cn={class:"action__tags"},un={key:0,class:"d-flex flex-wrap gap-2"},dn={class:"action__attribute"},mn={class:"d-flex flex-row align-items-center gap-2"},fn={class:"action__roll"},pn={class:"d-flex flex-column"},hn={class:"d-flex flex-row gap-2"},bn={key:0},vn={class:"action__buttons"},gn=["onClick"],yn=["onClick"],_n={__name:"HeroActions",props:{hero:{type:Object,required:!0}},emits:["add:action","update:action","delete:action"],setup(o,{emit:l}){const s=o,i=l,{t:e}=j(),{openRollContextMenu:n}=le(),r=B(()=>{const a={};for(const[f,c]of Object.entries(s.hero.attributes)){const{notation:_}=re(c);a[f]=_}return a}),d=(a,f={})=>{Ao(a,s.hero.attributes[a.attribute],f)},u=(a,f)=>{n(a,_=>{d(f,_)},{includeFollowUpOption:!0})};function k(){const a={id:$e(),name:e("actionModal.defaultName"),tags:[],attribute:Object.keys(pe)[0],includeAttributeDiceToRoll:!0,roll:[],notation:`1${e("diceShort")}4`};g(a,!0)}function g(a,f=!1){const c={...a},_=f?e("actionModal.newTitle"):e("actionModal.editTitle",{name:c.name}),$=ie(tn,{initialAction:c});N.fire({title:_,html:$,confirmButtonColor:"var(--bs-success)",confirmButtonText:e("save"),showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:e("cancel"),preConfirm:()=>{const T=document.getElementById("action-name").value,x=document.getElementById("action-tags").value.split(",").map(ae=>ae.trim()).filter(ae=>ae!==""),y=document.getElementById("action-attribute").value,A=document.getElementById("action-includeAttributeDiceToRoll").checked,C=document.getElementById("action-roll").value;if(!on(C))return N.showValidationMessage(e("actionModal.invalidRollNotation")),!1;const E=nn(C);return{name:T,tags:x,attribute:y,includeAttributeDiceToRoll:A,notation:C,roll:E}}}).then(T=>{if(T.isConfirmed){const x={...c,...T.value};s.hero.actions.some(y=>y.id===x.id)?i("update:action",x):i("add:action",x)}})}function m(a){s.hero.actions.findIndex(c=>c.id===a.id)!==-1&&N.fire({title:e("deleteAction.title",{name:a.name}),text:e("deleteAction.text"),icon:"warning",confirmButtonText:e("delete"),confirmButtonColor:"var(--bs-primary)",showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:e("cancel")}).then(c=>{c.isConfirmed&&(i("delete:action",a.id),N.fire({title:e("deleteAction.deletedModal.title",{name:a.name}),html:e("deleteAction.deletedModal.text"),icon:"success",timer:2e3,timerProgressBar:!0,confirmButtonText:e("close"),confirmButtonColor:"var(--bs-primary)"}))})}return(a,f)=>(h(),b(M,null,[t("div",sn,[t("h2",null,v(p(e)("hero.weapons&actions")),1),t("button",{class:"btn btn-primary",onClick:O(k,["stop"])},[w(p(R),{icon:["fas","fa-plus"],"fixed-width":""})])]),t("div",ln,[(h(!0),b(M,null,S(o.hero.actions,c=>(h(),b("div",{key:`weapon_${c.id}`,class:"action",onClick:_=>d(c),onContextmenu:_=>u(_,c)},[t("div",an,[w(p(R),{icon:["fas","fa-dice"],"fixed-width":"",class:"text-primary"}),t("h3",null,v(c.name),1)]),t("div",cn,[c.tags&&c.tags.length>0?(h(),b("div",un,[(h(!0),b(M,null,S(c.tags,(_,$)=>(h(),b("span",{class:"badge rounded-pill text-bg-dark",key:`weapon_${c.id}_tag_${$}`},v(_),1))),128))])):L("",!0)]),t("div",dn,[t("div",mn,[t("b",{style:I({color:p(P)[c.attribute]})},v(p(e)(`attribute.${c.attribute}Short`)),5),t("span",null,v(r.value[c.attribute]),1)])]),t("div",fn,[t("div",pn,[t("div",hn,[t("b",null,v(p(e)("roll")),1),t("span",null,v(c.notation),1)]),c.includeAttributeDiceToRoll?(h(),b("span",bn,v(a.$t("action.includeAttributeDiceToRoll")),1)):L("",!0)])]),t("div",vn,[t("button",{class:"btn btn-dark",onClick:O(_=>g(c),["stop"])},[w(p(R),{icon:["fas","fa-edit"],"fixed-width":""})],8,gn),t("button",{class:"btn btn-danger",onClick:O(_=>m(c),["stop"])},[w(p(R),{icon:["fas","fa-trash"],"fixed-width":""})],8,yn)])],40,rn))),128))])],64))}},xn={class:"attributes"},kn=["onClick","onContextmenu"],$n={class:"input-group"},Cn=["onClick"],wn=["value","onInput"],Mn={__name:"HeroAttributes",props:{hero:{type:Object,required:!0}},emits:["update:attribute"],setup(o,{emit:l}){const s=o,i=l,{openRollContextMenu:e}=le(),n=B(()=>{const g={};for(const[m,a]of Object.entries(s.hero.attributes)){const{dice:f,bonus:c,pool:_,notation:$}=re(a);g[m]={name:m,value:a,dice:f,bonus:c,pool:_,notation:$}}return g});function r(g,m={}){Mo(g,m)}function d(g,m){e(g,a=>{r(m,a)})}function u(g,m){const a=Number(m.target.value);i("update:attribute",g,a)}function k(g){const m=s.hero.attributes[g]+5;i("update:attribute",g,m)}return(g,m)=>(h(),b("div",xn,[(h(!0),b(M,null,S(n.value,(a,f)=>(h(),b("div",{key:f,class:"attribute"},[t("button",{class:"btn btn-link d-flex flex-row w-100 gap-2 align-items-center text-decoration-none",onClick:O(c=>r(a),["prevent"]),onContextmenu:c=>d(c,a)},[t("span",{class:"attribute--hover-background",style:I({backgroundColor:p(P)[f]})},null,4),w(p(R),{icon:["fas","fa-dice"],"fixed-width":"",class:"text-primary"}),t("b",{style:I({color:p(P)[f]})},v(g.$t(`attribute.${f}`)),5)],40,kn),t("div",$n,[t("button",{class:"btn btn-outline-primary",onClick:O(c=>k(f),["prevent"])}," +5 ",8,Cn),t("input",{type:"number",value:o.hero.attributes[f],onInput:c=>u(f,c),class:"form-control form-control-sm"},null,40,wn)]),t("span",null,v(a.notation),1)]))),128))]))}},Tn={class:"form-floating"},An=["placeholder"],Ln={for:"hero:name"},Hn={__name:"HeroInfo",props:{hero:{type:Object,required:!0}},setup(o){const l=o,s=fe();function i(n){const r=n.target.value.trim();if(!r)return;const d=JSON.parse(JSON.stringify(l.hero));d.name=r,e(d)}function e(n){s.saveHero(n)}return(n,r)=>(h(),b("div",null,[t("div",Tn,[t("input",{type:"text",class:"form-control",id:"hero:name",placeholder:n.$t("hero.name.placeholder"),onInput:i},null,40,An),t("label",Ln,v(n.$t("hero.name.label")),1)])]))}},Rn={class:"d-flex flex-column flex-md-row justify-content-between gap-3"},Sn={class:"list-group"},Dn={class:"list-group-item"},Pn={class:"list-group-item d-flex flex-row gap-2 align-items-center"},En={class:"list-group"},Bn={class:"list-group-item"},Nn={class:"list-group-item d-flex flex-column"},In={__name:"HeroStats",props:{hero:{type:Object,required:!0}},setup(o){const s=o.hero;return(i,e)=>(h(),b("div",Rn,[t("div",Sn,[e[3]||(e[3]=t("div",{class:"list-group-item list-group-item-danger"},"Trefferpunkte",-1)),t("div",Dn,[K(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>p(s).currentHitPoints=n)},null,512),[[Z,p(s).currentHitPoints]])]),t("div",Pn,[t("b",null,"Max: "+v(p(s).maxHitPoints),1),e[2]||(e[2]=t("small",null,"erholt: +10",-1))])]),t("div",En,[e[4]||(e[4]=t("div",{class:"list-group-item list-group-item-primary"},"Mana",-1)),t("div",Bn,[K(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>p(s).currentManaPoints=n)},null,512),[[Z,p(s).currentManaPoints]])]),t("div",Nn,[t("b",null,"Max: "+v(p(s).maxManaPoints),1)])])]))}},On={key:0},Vn={class:"d-flex flex-row justify-content-between align-items-center"},jn={class:"d-flex align-items-center"},Wn={class:"d-flex gap-2"},Kn={class:"hero"},Un={class:"hero__info"},zn={class:"hero__stats"},Fn={class:"hero__attributes"},qn={class:"hero__abilities"},Gn={class:"hero__actions"},Jn={key:1},Yn={class:"alert alert-warning"},Xn={__name:"HeroesDetailView",setup(o){const l=ge(),{showDeleteHeroModal:s}=ke(),i=fe(),e=B(()=>l.params.id),n=B(()=>i.getHeroById(e.value)||null);function r(){n.value&&s(n.value,()=>{i.deleteHero(n.value),ve.push({name:"heroes.list"})})}function d(a,f){n.value.attributes[a]=Number(f)}function u(a,f){const c=n.value.abilities.find(_=>_.name===a);c&&(c.honeLevel=f)}function k(a){n.value.actions.push(a)}function g(a){const f=n.value.actions.findIndex(c=>c.id===a.id);f!==-1&&(n.value.actions[f]=a)}function m(a){const f=n.value.actions.findIndex(c=>c.id===a);f!==-1&&n.value.actions.splice(f,1)}return(a,f)=>{const c=ne("RouterLink");return n.value?(h(),b("div",On,[t("div",Vn,[t("div",jn,[w(c,{to:{name:"heroes.list"},class:"btn btn-link",title:"zurück"},{default:z(()=>[w(p(R),{icon:["fas","fa-chevron-left"],"fixed-width":""})]),_:1}),t("h1",null,v(n.value.name),1)]),t("div",Wn,[t("button",{class:"btn btn-danger",onClick:r,title:"wech damit"},[w(p(R),{icon:["fas","fa-trash"],"fixed-width":""})])])]),f[1]||(f[1]=t("hr",null,null,-1)),t("div",Kn,[t("div",Un,[w(Hn,{hero:n.value},null,8,["hero"])]),t("div",zn,[w(In,{hero:n.value},null,8,["hero"])]),t("div",Fn,[w(Mn,{hero:n.value,"onUpdate:attribute":d},null,8,["hero"])]),t("div",qn,[w(No,{hero:n.value,"onUpdate:abilityHoneLevel":u},null,8,["hero"])]),t("div",Gn,[w(_n,{hero:n.value,"onAdd:action":k,"onUpdate:action":g,"onDelete:action":m},null,8,["hero"])]),f[0]||(f[0]=t("div",{class:"hero__talents"},null,-1))])])):(h(),b("div",Jn,[t("div",Yn,[t("h1",null,v(a.$t("heroNotFound.title")),1),t("span",null,[D(v(a.$t("heroNotFound.text")),1),f[2]||(f[2]=t("br",null,null,-1)),w(c,{class:"alert-link",to:{name:"heroes.list"}},{default:z(()=>[D(v(a.$t("heroesList.navigateTo")),1)]),_:1})])])]))}}},Zn=[{path:"/",name:"home",component:ht},{path:"/heroes",name:"heroes",redirect:{name:"heroes.list"},children:[{path:"",name:"heroes.list",component:Ct},{path:":id",name:"heroes.detail",component:Xn,props:!0,meta:{mainClass:"container-fluid"}}]}],ve=Ne({history:Ie("/gothic-tales/"),routes:Zn});var Qn=We();const U=xe(Qn);U.setDriver([U.INDEXEDDB,U.LOCALSTORAGE,U.WEBSQL]).then(()=>{console.debug("[PiniaPersistPlugin] LocalForage drivers set: IndexedDB prioritized.")}).catch(o=>{console.error("[PiniaPersistPlugin] Failed to set LocalForage drivers:",o)});function es(o,l){let s;return function(...e){const n=this,r=function(){s=null,o.apply(n,e)};clearTimeout(s),s=setTimeout(r,l)}}function ts(o={}){const{baseKey:l="pinia",keySeparator:s="-",suffix:i="data",defaultDebounceDelay:e=300,excludePathsOnAutoPersist:n=["loaded"]}=o;return async({store:r,options:d})=>{const u=d?.persist;if(!u)return;const{key:k,paths:g,serializer:m=y=>JSON.stringify(y),deserializer:a=y=>JSON.parse(y),debounce:f=e,customKeyBuilder:c}=typeof u=="object"?u:{};let _;g!==void 0?_=g:_=Object.keys(r.$state).filter(y=>!n.includes(y));const T=(()=>{if(c)return c({baseKey:l,storeId:r.$id,separator:s,suffix:i,storeSpecificKey:k});const y=typeof k=="function"?k(r.$id):k||r.$id;return`${l}${s}${y}${s}${i}`})();try{const y=await U.getItem(T);if(y){const A=a(y),C={};_.forEach(E=>{A&&typeof A=="object"&&A.hasOwnProperty(E)&&(C[E]=A[E])}),r.$patch(C)}}catch(y){console.error(`[PiniaPersistPlugin] Error loading store '${r.$id}' (Key: ${T}) from IndexDB:`,y)}finally{r.hasOwnProperty("loaded")&&(r.loaded=!0)}const x=es(y=>{try{const A=m(y);U.setItem(T,A)}catch(A){console.error(`[PiniaPersistPlugin] Error saving store '${r.$id}' (Key: ${T}) to IndexDB:`,A)}},f);r.$subscribe((y,A)=>{const C={};_.forEach(E=>{A.hasOwnProperty(E)?C[E]=Oe(A[E]):console.warn(`[PiniaPersistPlugin] Path '${E}' in store '${r.$id}' not found. Will not be persisted.`)}),x(C)})}}const Ae=Ve(),os=ts({baseKey:"gothic_tales"});Ae.use(os);Ke.add(Ue,ze,Fe,qe,Ge,Je);const ee=_e(mt);ee.component("font-awesome-icon",R);ee.use(ve);ee.use(Ae);ee.use(F);ee.mount("#app");
