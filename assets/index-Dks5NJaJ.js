import{a as g,b as t,e as C,f as F,r as se,o as p,g as P,i as j,u as I,c as E,w as me,m as Me,j as M,k as h,F as A,l as S,t as b,n as V,p as ve,q as oe,T as Le,s as ye,v as He,x as Se,y as N,z as Pe,A as _e,h as Be,B as W,C as Q,D as Ee,E as Re,G as Ie,H as Ne,I as Oe}from"./vue-CLvJc0W0.js";import{F as H,S as R,r as Ve,g as xe,a as je,l as Ke,f as Ue,b as We,c as ze,d as Fe,e as qe,h as Ge}from"./libraries-BmRGeqwU.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerPolicy&&(l.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?l.credentials="include":e.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(e){if(e.ep)return;e.ep=!0;const l=a(e);fetch(e.href,l)}})();const K=(n,i)=>{const a=n.__vccOpts||n;for(const[s,e]of i)a[s]=e;return a},Ye={},Je={id:"header",class:"mb-2 bg-dark"},Xe={class:"container"},Ze={class:"d-flex justify-content-between navbar navbar-dark navbar-expand align-items-center"},Qe={id:"navbar-default",class:"navbar-nav"},et={class:"nav-item"};function tt(n,i){const a=se("router-link");return p(),g("header",Je,[t("div",Xe,[t("nav",Ze,[i[1]||(i[1]=t("a",{href:"#",class:"navbar-brand d-flex flex-column align-items-center"},[t("span",null,"Test")],-1)),t("ul",Qe,[t("li",et,[C(a,{to:{name:"heroes.list"},class:"nav-link"},{default:F(()=>i[0]||(i[0]=[P(" Heroes ")])),_:1,__:[0]})])])])])])}const nt=K(Ye,[["render",tt]]),G=j(!1),ce=j({}),U=j({x:0,y:0}),Y=j(null),L=j({rollType:"normal",modifierValue:0,attackRollType:null});let J=null,X=null,Z=null;function ie(){const{t:n}=I(),i=()=>{L.value={rollType:"normal",modifierValue:0,attackRollType:null}},a=()=>[{label:n("contextMenu.normalRoll"),key:"rollType",value:"normal"},{label:n("contextMenu.advantageRoll"),key:"rollType",value:"advantage"},{label:n("contextMenu.disadvantageRoll"),key:"rollType",value:"disadvantage"}],s=E(()=>{if(L.value.rollType==="normal")return[];const v=L.value.rollType;let d=1;return v==="disadvantage"&&(d=-1),[{label:n("contextMenu.modifierSmall",{value:2*d}),key:"modifierValue",value:2*d},{label:n("contextMenu.modifierMedium",{value:5*d}),key:"modifierValue",value:5*d},{label:n("contextMenu.modifierLarge",{value:8*d}),key:"modifierValue",value:8*d}]}),e=()=>[{label:n("contextMenu.followUpAttack"),key:"attackRollType",value:"followUp"}],l=()=>{if(!G.value)return;const v=document.getElementById("context-menu-container");if(!v)return;const d=v.offsetWidth,c=v.offsetHeight,f=window.innerWidth,r=window.innerHeight;let y=U.value.x,k=U.value.y;y+d>f&&(y=f-d-10),y<0&&(y=10),k+c>r&&(k=r-c-10),k<0&&(k=10),U.value={x:y,y:k}},o=(v,d=null,c={},f={})=>{v.preventDefault(),i(),Object.assign(L.value,f),Object.assign(ce.value,c),G.value=!0,Y.value=d?Me(d):null,U.value={x:v.clientX,y:v.clientY},setTimeout(()=>{l(),J=r=>{const y=document.getElementById("context-menu-container");y&&!y.contains(r.target)&&u()},X=r=>{const y=document.getElementById("context-menu-container");y&&!y.contains(r.target)&&u()},Z=r=>{r.key==="Escape"&&u()},document.addEventListener("click",J,!0),document.addEventListener("contextmenu",X,!0),document.addEventListener("keydown",Z)},50)},u=()=>{G.value=!1,ce.value={},U.value={x:0,y:0},Y.value=null,i(),J&&(document.removeEventListener("click",J,!0),J=null),X&&(document.removeEventListener("contextmenu",X,!0),X=null),Z&&(document.removeEventListener("keydown",Z),Z=null)},m=(v,d)=>{const c=L.value.rollType;v==="rollType"&&d==="normal"?L.value.modifierValue=0:v==="rollType"&&d!=="normal"&&L.value.modifierValue===0&&(L.value.modifierValue=d==="advantage"?2:-2),v==="attackRollType"?L.value.attackRollType===d?L.value.attackRollType=null:L.value.attackRollType=d:L.value[v]=d,v==="rollType"&&L.value.rollType!==c&&setTimeout(l,0)},$=()=>{Y.value&&Y.value({...L.value}),u()};return me(G,v=>{v?window.addEventListener("resize",l):window.removeEventListener("resize",l)}),{isContextMenuOpen:G,contextMenuConfig:ce,contextMenuCallback:Y,contextMenuPosition:U,selectedModifiers:L,openRollContextMenu:o,closeContextMenu:u,selectOption:m,triggerRoll:$,getRollTypeOptions:a,getModifierValueOptions:s,getAttackRollOptions:e}}const ot=["onClick"],st={key:0,class:"ms-2"},it=["onClick"],at={key:0,class:"ms-2"},lt=["onClick"],rt={key:0,class:"ms-2"},ct={__name:"ContextMenu",setup(n){const{isContextMenuOpen:i,contextMenuConfig:a,contextMenuPosition:s,selectedModifiers:e,selectOption:l,triggerRoll:o,getRollTypeOptions:u,getModifierValueOptions:m,getAttackRollOptions:$}=ie(),{t:v}=I(),d=T=>({left:`${T.x}px`,top:`${T.y}px`,position:"fixed",backgroundColor:"#333",border:"1px solid #555",borderRadius:"4px",boxShadow:"0 2px 10px rgba(0,0,0,0.5)",zIndex:1e3,padding:"5px 0",minWidth:"150px",listStyle:"none",margin:0}),c={padding:"8px 15px",cursor:"pointer",color:"#eee",backgroundColor:"transparent"},f={backgroundColor:"#555"},r={borderTop:"1px solid #555",margin:"5px 0"},y={borderTop:"3px double #555",margin:"5px 0"},k=(T,x)=>e.value[T]===x;return(T,x)=>h(i)?(p(),g("ul",{key:0,style:V(d(h(s))),id:"context-menu-container"},[(p(!0),g(A,null,S(h(u)(),(_,D)=>(p(),g("li",{key:`roll-type-${D}`,style:c,onClick:w=>h(l)(_.key,_.value),onMouseover:x[0]||(x[0]=w=>w.currentTarget.style.backgroundColor=f.backgroundColor),onMouseleave:x[1]||(x[1]=w=>w.currentTarget.style.backgroundColor=c.backgroundColor)},[P(b(_.label)+" ",1),k(_.key,_.value)?(p(),g("span",st,[C(h(H),{icon:["fas","fa-check"]})])):M("",!0)],40,ot))),128)),h(m).length>0?(p(),g(A,{key:0},[t("li",{style:r}),(p(!0),g(A,null,S(h(m),(_,D)=>(p(),g("li",{key:`mod-value-${D}`,style:c,onClick:w=>h(l)(_.key,_.value),onMouseover:x[2]||(x[2]=w=>w.currentTarget.style.backgroundColor=f.backgroundColor),onMouseleave:x[3]||(x[3]=w=>w.currentTarget.style.backgroundColor=c.backgroundColor)},[P(b(_.label)+" ",1),k(_.key,_.value)?(p(),g("span",at,[C(h(H),{icon:["fas","fa-check"]})])):M("",!0)],40,it))),128))],64)):M("",!0),h(a).includeFollowUpOption?(p(),g(A,{key:1},[t("li",{style:r}),(p(!0),g(A,null,S(h($)(),(_,D)=>(p(),g("li",{key:`attack-roll-${D}`,style:c,onClick:w=>h(l)(_.key,_.value),onMouseover:x[4]||(x[4]=w=>w.currentTarget.style.backgroundColor=f.backgroundColor),onMouseleave:x[5]||(x[5]=w=>w.currentTarget.style.backgroundColor=c.backgroundColor)},[P(b(_.label)+" ",1),k(_.key,_.value)?(p(),g("span",rt,[C(h(H),{icon:["fas","fa-check"]})])):M("",!0)],40,lt))),128))],64)):M("",!0),t("li",{style:y}),t("li",{style:V({...c,textAlign:"center",fontWeight:"bold"}),onClick:x[6]||(x[6]=(..._)=>h(o)&&h(o)(..._)),onMouseover:x[7]||(x[7]=_=>_.currentTarget.style.backgroundColor=f.backgroundColor),onMouseleave:x[8]||(x[8]=_=>_.currentTarget.style.backgroundColor=c.backgroundColor)},[P(b(h(v)("contextMenu.rollButton"))+" ",1),C(h(H),{icon:["fas","fa-dice"]})],36)],4)):M("",!0)}},ut=K(ct,[["__scopeId","data-v-d1e7517b"]]),dt={__name:"App",setup(n){const i=ve(),a=E(()=>i.meta.mainClass||"container"),s=j("fade-left");return me(()=>i.fullPath,(e,l)=>{const o=e.split("/").filter(Boolean).length,u=l.split("/").filter(Boolean).length;o<u?s.value="fade-right":s.value="fade-left"}),(e,l)=>{const o=se("RouterView");return p(),g(A,null,[C(nt),C(ut),C(o,null,{default:F(({Component:u})=>[t("main",{class:oe(["my-3",a.value])},[C(Le,{name:s.value,mode:"out-in"},{default:F(()=>[(p(),ye(He(u)))]),_:2},1032,["name"])],2)]),_:1})],64)}}},mt={};function ft(n,i){return p(),g("h1",null,"Test")}const pt=K(mt,[["render",ft]]),fe=Se("hero",{state:()=>({heroes:[],loaded:!1}),persist:{key:"heroes",paths:["heroes"]},getters:{getHeroes:n=>n.heroes,getHeroById:n=>i=>n.heroes.find(a=>a.id===i)},actions:{saveHero(n){const i=this.heroes.findIndex(a=>a.id===n.id);i!==-1?this.heroes[i]=n:this.heroes.push(n)},deleteHero(n){const i=this.heroes.findIndex(a=>a.id===n.id);i!==-1&&this.heroes.splice(i,1)}}});function ke(){const{t:n}=I();return{showDeleteHeroModal:(a,s)=>{R.fire({title:n("deleteHero.title",{name:a.name}),text:n("deleteHero.text"),icon:"warning",confirmButtonText:n("delete"),confirmButtonColor:"var(--bs-primary)",showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:n("cancel"),preConfirm:()=>{s&&s(),R.fire({title:n("deleteHero.deletedModal.title",{name:a.name}),html:n("deleteHero.deletedModal.text"),icon:"success",timer:2e3,timerProgressBar:!0,confirmButtonText:n("close")})}})}}}function $e(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():(console.warn("crypto.randomUUID() not available, falling back to Date.now() for ID generation."),Date.now())}class ht{id;name;attributes={strength:1,dexterity:1,endurance:1,concentration:1,intuition:1,experience:1};abilities=[];maxHitPoints=0;currentHitPoints=0;constructor(i,a=null,s=null){this.id=$e(),this.name=i,a&&(this.attributes=a),s&&(this.abilities=s)}}const pe={strength:10,dexterity:10,endurance:10,concentration:10,intuition:10,experience:10},gt=[{name:"endure",attributes:["concentration","endurance"],honeLevel:0,category:"body"},{name:"moveObject",attributes:["strength","endurance"],honeLevel:0,category:"body"},{name:"jumpingClimbing",attributes:["strength","dexterity"],honeLevel:0,category:"body"},{name:"agility",attributes:["dexterity","experience"],honeLevel:0,category:"body"},{name:"stealth",attributes:["dexterity","intuition"],honeLevel:0,category:"body"},{name:"persuade",attributes:["concentration","intuition"],honeLevel:0,category:"social"},{name:"intimidate",attributes:["concentration","strength"],honeLevel:0,category:"social"},{name:"deceive",attributes:["dexterity","intuition"],honeLevel:0,category:"social"},{name:"insight",attributes:["intuition","experience"],honeLevel:0,category:"social"},{name:"perceive",attributes:["strength","endurance"],honeLevel:0,category:"senses"},{name:"rememberingReflectionResearch",attributes:["intuition","experience"],honeLevel:0,category:"senses"},{name:"magicSense",attributes:["concentration","experience"],honeLevel:0,category:"senses"}];class bt extends ht{level=1;learningPoints=10;actions=[];maxManaPoints=0;currentManaPoints=0;constructor(i,a=pe,s=gt){super(i,a,s)}}const vt={class:"d-flex justify-content-between align-items-center"},yt={class:"list-group"},_t={class:"d-flex flex-column gap-2"},xt={class:"d-flex flex-row align-items-baseline gap-2"},kt=["onClick"],$t={__name:"HeroesListView",setup(n){const i=fe(),{showDeleteHeroModal:a}=ke(),{t:s}=I(),e=E(()=>i.getHeroes.sort(($,v)=>$.name.toLowerCase().localeCompare(v.name.toLowerCase())));function l(){R.fire({title:s("createHero.title"),html:s("createHero.html"),icon:"question",input:"text",inputValue:s("createHero.defaultValue"),inputPlaceholder:s("createHero.placeholder"),inputAutoTrim:!0,inputAutoFocus:!0,inputAttributes:{autocapitalize:"off"},confirmButtonColor:"var(--bs-success)",confirmButtonText:s("create"),showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:s("cancel"),preConfirm:o})}function o(m){if(m=m.toString(),!m||m.length===0||m.toLowerCase()===s("createHero.namelessHero.name").toLowerCase()){R.fire({icon:"error",title:s("error"),html:s("createHero.namelessHero.html"),confirmButtonText:s("back"),confirmButtonColor:"var(--bs-primary)",preConfirm:()=>{l()}});return}try{const $=new bt(m);i.saveHero($),be.push({name:"heroes.detail",params:{id:$.id}})}catch($){R.fire({icon:"error",title:"error",html:$.message,confirmButtonText:s("back"),confirmButtonColor:"var(--bs-primary)",preConfirm:()=>{l()}})}}function u(m){a(m,()=>{i.deleteHero(m)})}return(m,$)=>{const v=se("RouterLink");return p(),g("div",null,[t("div",vt,[t("h1",null,b(m.$t("heroesList.headline")),1),t("button",{class:"btn btn-secondary",onClick:l},b(m.$t("new")),1)]),$[0]||($[0]=t("hr",null,null,-1)),t("div",yt,[(p(!0),g(A,null,S(e.value,d=>(p(),ye(v,{key:`hero_${d.name}`,to:{name:"heroes.detail",params:{id:d.id}},class:"list-group-item list-group-item-action d-flex flex-row justify-content-between align-items-center"},{default:F(()=>[t("div",_t,[t("div",xt,[t("h2",null,b(d.name),1),t("span",null," ("+b(m.$t("hero.level"))+": "+b(d.level)+" "+b(m.$t("hero.learningPointsShort"))+": "+b(d.learningPoints)+") ",1)])]),t("div",null,[t("button",{class:"btn btn-danger",onClick:N(c=>u(d),["prevent"])},b(m.$t("delete")),9,kt)])]),_:2},1032,["to"]))),128))])])}}},O={strength:"red",dexterity:"green",endurance:"darkgoldenrod",concentration:"blue",intuition:"purple",experience:"gray"},wt={body:"Körper",other:"Andere",senses:"Sinne",social:"Sozial",endure:"Durchhalten",moveObject:"Objekte bewegen",jumpingClimbing:"Springen/Klettern",agility:"Gewandtheit",stealth:"Heimlichkeit",persuade:"Überreden",intimidate:"Einschüchtern",deceive:"Betrügen",insight:"Menschenkenntnis",perceive:"Wahrnehmen",rememberingReflectionResearch:"Erinnern/Erwägen/Erforschen",magicSense:"Magiegespür"},Ct={includeAttributeDiceToDamage:"+ Attributswürfel"},At={attributeLabel:"Attribut",damageLabel:"Schaden",damagePlaceholder:"1W6",defaultName:"Volles Pfund aufs Maul!",editTitle:'"{name}"<br>bearbeiten',includeAttributeDiceToDamageHelp:"Wenn aktiv, wird der Attributswurf (ohne den W20) zum Schaden hinzugefügt.<br>Bei manchen Waffen (z.B. Armbrüsten) oder bei Zaubern muss diese Option eventuell deaktiviert werden.",includeAttributeDiceToDamageLabel:"Attributswurf zum Schaden hinzufügen?",invalidDamageNotation:"Ungültige Schaden-Notation. Bitte das Format 'xWy+z' verwenden.",nameLabel:"Name",namePlaceholder:"Der Name der Waffe/Aktion",newTitle:"Neue Waffe/Aktion anlegen",tagsLabel:"Eigenschaften/Merkmale",tagsPlaceholder:"Eigenschaften/Merkmale (per Komma getrennt)"},Tt={name:"Gothic Tales"},Dt="Angriffswurf",Mt={followUp:"(2W20kl)"},Lt={concentration:"Konzentration",concentrationShort:"Konz",dexterity:"Geschicklichkeit",dexterityShort:"Ge",intuition:"Intuition",intuitionShort:"Intu",endurance:"Ausdauer",enduranceShort:"Ausd",experience:"Erfahrung",experienceShort:"Erf",strength:"Stärke",strengthShort:"St"},Ht="Zurück",St="Abbrechen",Pt={normalRoll:"Normaler Wurf",advantageRoll:"Wurf mit Vorteil",disadvantageRoll:"Wurf mit Nachteil",modifierSmall:"Klein ({value})",modifierMedium:"Mittel ({value})",modifierLarge:"Groß ({value})",attackRollOptions:"Angriffsoptionen",followUpAttack:"Folgeangriff",rollButton:"Würfeln"},Bt="Erstellen",Et={defaultValue:"Neuer Held",html:"Bitte den Namen des Helden eingeben.<br><small><i>Der Namenlose Held ist nicht erlaubt</i> 😜</small>",placeholder:"Name des Helden",title:"Neuen Held erstellen",namelessHero:{name:"Namenlose Held",html:"Wie gesagt, du bist <b>nicht</b> der Namenlose Held!"}},Rt="Schließen",It="Schaden",Nt="Schadenswurf",Ot={text:"Diese Aktion kann nicht mehr rückgängig gemacht werden!",title:'"{name}"<br>wirklich löschen?',deletedModal:{text:"War sowieso nur Schrott!",title:'"{name}"<br>wurde gelöscht'}},Vt={text:"Diese Aktion kann nicht mehr rückgängig gemacht werden!",title:'"{name}"<br>wirklich löschen?',deletedModal:{text:"Möge Innos der Seele gnädig sein.",title:'"{name}"<br>wurde gelöscht'}},jt="W",Kt="Fehler",Ut={ability:"Fähigkeit",abilities:"Fähigkeiten",attribute:"Attribut",attributes:"Attribute",learningPoints:"Lernpunkte",learningPointsShort:"LP",level:"Stufe","weapons&actions":"Waffen & Aktionen"},Wt={headline:"Liste deiner Helden",navigateTo:"Zur Heldenliste"},zt={title:"Held nicht gefunden",text:"Der angefragte Held existiert nicht oder wurde gelöscht. Sie werden zur Heldenliste weitergeleitet."},Ft={level0:"ungeübt",level1:"geübt",level2:"gelehrt",level3:"gemeistert"},qt={advantage:"Vorteil",disadvantage:"Nachteil"},Gt="Speichern",Yt="Status",Jt="Summe: {sum}",Xt="Wert: {value}",Zt={abilities:wt,action:Ct,actionModal:At,app:Tt,attackRoll:Dt,attackType:Mt,attribute:Lt,back:Ht,cancel:St,contextMenu:Pt,create:Bt,createHero:Et,close:Rt,damage:It,damageRoll:Nt,delete:"Löschen",deleteAction:Ot,deleteHero:Vt,diceShort:jt,error:Kt,hero:Ut,heroesList:Wt,heroNotFound:zt,honeLevel:Ft,modifier:qt,new:"Neu",save:Gt,status:Yt,sum:Jt,valueDisplay:Xt},q=Pe({locale:"de",fallbackLocale:"de",messages:{de:Zt}});var Qt=Ve();const en=xe(Qt),tn={class:"d-flex flex-column"},nn=["innerHTML"],on={key:0,class:"toast-divider"},sn={key:1,class:"toast-section-title"},an={class:"d-flex flex-row align-items-center toast-rolls-container"},ln={class:"d-flex flex-column align-items-center toast-roll-part"},rn={class:"toast-dice-notation"},cn={class:"toast-roll-values"},un={class:"toast-dice-notation"},dn={class:"toast-roll-values"},mn={class:"toast-bonus-notation"},fn={class:"toast-bonus-value"},pn={class:"toast-modifier-notation"},hn={class:"toast-modifier-value"},gn={key:0,class:"toast-plus-sign"},bn={key:0,class:"text-end toast-section-sum"},vn={class:"text-end toast-section-sum"},yn={key:2,class:"toast-footer-text"},_n=["innerHTML"],xn={__name:"DiceRollToastContent",props:{header:{type:String,required:!1,default:""},headerColor:{type:String,required:!1,default:"inherit"},sections:{type:Array,required:!0,default:()=>[]},sum:{type:Number,required:!1},footer:{type:String,required:!1,default:""}},setup(n){const{t:i}=I();return(a,s)=>(p(),g("div",tn,[n.header?(p(),g("div",{key:0,style:V({color:n.headerColor}),class:"toast-header-text"},[t("span",{innerHTML:n.header},null,8,nn)],4)):M("",!0),(p(!0),g(A,null,S(n.sections,(e,l)=>(p(),g(A,{key:"section_"+l},[l>0?(p(),g("hr",on)):M("",!0),e.title?(p(),g("b",sn,b(e.title),1)):M("",!0),t("div",an,[(p(!0),g(A,null,S(e.parts,(o,u)=>(p(),g(A,{key:"section_"+l+"_part_"+u},[t("div",ln,[o.item.type==="dice"?(p(),g(A,{key:0},[t("span",rn,b(o.item.count>1?o.item.count:"")+b(h(i)("diceShort"))+b(o.item.sides),1),t("span",cn,b(o.rolls.join("+")),1)],64)):M("",!0),o.item.type==="d20special"?(p(),g(A,{key:1},[t("span",un,b(h(i)(o.label)),1),t("span",dn,[s[0]||(s[0]=P(" (")),t("span",{class:oe({"toast-roll-selected":o.item.selected===0})},b(o.item.rolls[0]),3),s[1]||(s[1]=P("/")),t("span",{class:oe({"toast-roll-selected":o.item.selected===1})},b(o.item.rolls[1]),3),s[2]||(s[2]=P(") "))])],64)):o.item.type==="bonus"?(p(),g(A,{key:2},[t("span",mn,b(o.sum),1),t("span",fn,b(o.sum),1)],64)):o.item.type==="advantage"||o.item.type==="disadvantage"?(p(),g(A,{key:3},[t("span",pn,b(h(i)(`modifier.${o.item.type}`)),1),t("span",hn,b(o.sum),1)],64)):M("",!0)]),u<e.parts.length-1?(p(),g("span",gn," + ")):M("",!0)],64))),128)),e.sum?(p(),g("b",bn,b(h(i)("sum",{sum:e.sum})),1)):M("",!0)])],64))),128)),n.sum?(p(),g(A,{key:1},[s[3]||(s[3]=t("hr",{class:"toast-divider"},null,-1)),t("b",vn,b(h(i)("sum",{sum:n.sum})),1)],64)):M("",!0),n.footer?(p(),g("div",yn,[t("span",{innerHTML:n.footer},null,8,_n)])):M("",!0)]))}},he=K(xn,[["__scopeId","data-v-96f90f72"]]);function ae(n,i={}){const a=document.createElement("div"),s=_e({render:()=>Be(n,i)});s.use(q),s.mount(a);const e=a.innerHTML;return s.unmount(),e}function de(n){if(!Array.isArray(n)||n.length===0)return;const i={pool:n,parts:[],sum:0};for(let a=0;a<n.length;a++){const s=n[a],e={item:s};switch(s.type){case"dice":let l=0;e.rolls=[];for(let o=0;o<s.count;o++){const u=ne(s.sides);l+=u,e.rolls.push(u)}e.sum=l;break;case"bonus":e.sum=s.bonus;break;case"advantage":case"disadvantage":e.type=s.type,e.sum=s.value;break}i.sum+=e.sum,i.parts.push(e)}return i}function we(n,i={}){const a=n.slice();return a.unshift({type:"dice",count:1,sides:20}),i.rollType&&i.modifierValue!==0&&a.push({type:i.rollType,value:i.modifierValue}),de(a)}function ne(n){return 1+Math.floor(Math.random()*n)}const Ce=[{id:0,i18nKey:"honeLevel.level0",notation:"",poolAdditions:[]},{id:1,i18nKey:"honeLevel.level1",notation:"2",poolAdditions:[{type:"bonus",bonus:2}]},{id:2,i18nKey:"honeLevel.level2",notation:"D4+2",poolAdditions:[{type:"dice",sides:4,count:1},{type:"bonus",bonus:2}]},{id:3,i18nKey:"honeLevel.level3",notation:"2D6+3",poolAdditions:[{type:"dice",sides:6,count:2},{type:"bonus",bonus:3}]}],Ae=new Map(Ce.map(n=>[n.id,n])),kn={NONE:0},{t:Te}=q.global,ue=[2,4,6,8,10,12];function $n(n){const i={2:1};let a=n;for(;a>=10;){let s=!1;for(let e=ue.length-2;e>=0;e--){const l=ue[e];if(i[l]&&i[l]>0){i[l]--,i[l]===0&&delete i[l];const o=ue[e+1];i[o]=(i[o]||0)+1,s=!0;break}}s||i[12]&&i[12]>0&&(i[12]--,i[12]===0&&delete i[12],i[6]=(i[6]||0)+2,s=!0),s||(i[2]=(i[2]||0)+1),a-=10}return i}function wn(n){return Math.max(Math.floor((n-5)/10),0)}function Cn(n,i,a){const s=Ae.get(a);if(s&&s.poolAdditions.length>0){s.poolAdditions.forEach(l=>{n.push(l)});let e=s.notation;e=e.replace(/D/g,Te("diceShort")),i.push(e)}}function le(n,i=kn.NONE){const a=$n(n),s=wn(n),e=[],l=[];Object.keys(a).map(Number).sort((u,m)=>m-u).forEach(u=>{const m=String(u),$=a[m];e.push({type:"dice",sides:u,count:$}),l.push(`${$}${Te("diceShort")}${m}`)}),s>0&&(e.push({type:"bonus",bonus:s}),l.push(`${s}`)),Cn(e,l,i);const o=l.filter(u=>u).join("+");return{dice:a,bonus:s,pool:e,notation:o}}const{t:ee}=q.global;function ge(n,i={},a={}){const l={...{text:n,close:!0,html:!0,escapeMarkup:!1,className:"rounded",duration:-1},...i,style:{...{background:"var(--bs-body-bg)",color:"var(--bs-body-color)",border:"2px solid var(--bs-body-color)"},...a}},u=en(l).showToast().toastElement;u.addEventListener("click",()=>{const m=u.querySelector(".toast-close");m&&m.click()})}function An(n,i){const a=we(n.pool,i),s=`<b>${ee("attribute."+n.name)}</b>`,e=[{parts:a.parts}],l=O[n.name],o=ae(he,{header:s,headerColor:l,sections:e,sum:a.sum});ge(o,{},{borderColor:l})}function Tn(n,i){const a=we(n.pool,i);let s=`<b>${ee(`abilities.${n.name}`)}</b>`;if(n.honeLevel){const m=Ae.get(n.honeLevel);m&&(s=`<span>${s} (${ee(m.i18nKey)})</span>`)}const e=[{parts:a.parts}],l=ae(he,{header:s,sections:e,sum:a.sum}),o=O[n.attributes[0]],u=O[n.attributes[1]];ge(l,{},{borderTopColor:o,borderLeftColor:o,borderRightColor:u,borderBottomColor:u})}function Dn(n,i,a){const s=le(i);let e=[],l,o=-1;a.attackRollType==="followUp"?(e=[ne(20),ne(20)],l=Math.min(...e),o=e.indexOf(l)):(e=[ne(20)],l=e[0],o=0);let u=s.pool.slice();a.rollType!=="normal"&&a.modifierValue!==0&&u.push({type:a.rollType,value:a.modifierValue});const m=de(u),$=l+m.sum,v=de(n.damage);let d;n.includeAttributeDiceToDamage?d=m.sum+v.sum:d=v.sum;const c=`<b>${n.name}</b>`;let f=[];e.length>1?f.push({item:{type:"d20special",rolls:e,selected:o},label:"attackType.followUp",rolls:e,sum:l}):f.push({item:{type:"dice",count:1,sides:20},rolls:[l],sum:l}),f.push(...m.parts);const r={title:ee("attackRoll"),parts:f,sum:$};let y;n.includeAttributeDiceToDamage?y=[...m.parts,...v.parts]:y=[...v.parts];const k={title:ee("damageRoll"),parts:y,sum:d},x=ae(he,{header:c,sections:[r,k]});ge(x,{},{borderColor:O[n.attribute]})}const Mn={class:"h4 abilities__category list-group-item list-group-item-primary"},Ln=["onClick","onContextmenu"],Hn={class:"d-flex flex-row align-items-center gap-2"},Sn={class:"d-flex flex-column flex-grow-1 justify-content-between gap-1"},Pn={class:"d-flex justify-content-between align-items-center"},Bn={class:"col-auto"},En=["id","onChange","value"],Rn=["value"],In={class:"d-flex justify-content-between align-items-center"},Nn={class:"ms-2"},On={class:"flex-grow-0"},Vn={__name:"HeroAbilities",props:{hero:{type:Object,required:!0}},emits:["update:abilityHoneLevel"],setup(n,{emit:i}){const a=n,s=i,{openRollContextMenu:e}=ie(),{t:l}=I(),o=E(()=>Ce),u=E(()=>{const d={};return a.hero.abilities.forEach(c=>{const f=a.hero.attributes[c.attributes[0]],r=a.hero.attributes[c.attributes[1]],y=Math.floor((Number(f)+Number(r))/2),{dice:k,bonus:T,pool:x,notation:_}=le(y,c.honeLevel),D={...c,value:y,dice:k,bonus:T,pool:x,notation:_};d[c.category]||(d[c.category]=[]),d[c.category].push(D)}),d});function m(d,c){const f=Number(c.target.value);s("update:abilityHoneLevel",d,f)}function $(d,c={}){Tn(d,c)}function v(d,c){e(d,f=>{$(c,f)})}return(d,c)=>(p(!0),g(A,null,S(u.value,(f,r,y)=>(p(),g("div",{key:`abilities_${r}`,class:oe(["abilities list-group",{"mb-3":y<Object.keys(u.value).length-1}])},[t("h3",Mn,b(h(l)(`abilities.${r}`)),1),(p(!0),g(A,null,S(f,(k,T)=>(p(),g("div",{key:`ability_${r}_${T}`,class:"abilities__ability list-group-item list-group-item-action",onClick:N(x=>$(k),["prevent"]),onContextmenu:x=>v(x,k)},[t("div",Hn,[t("div",Sn,[t("div",Pn,[t("b",null,b(h(l)(`abilities.${k.name}`)),1),t("div",Bn,[t("select",{class:"form-select form-select-sm",id:`ability_${r}_${T}_honeLevel`,onClick:c[0]||(c[0]=N(()=>{},["stop"])),onChange:x=>m(k.name,x),value:k.honeLevel},[(p(!0),g(A,null,S(o.value,x=>(p(),g("option",{key:`ability_${r}_${T}_honeLevel_${x.id}`,value:x.id},b(h(l)(x.i18nKey)),9,Rn))),128))],40,En)])]),t("div",In,[t("span",null,[t("b",{style:V({color:h(O)[k.attributes[0]]})},b(h(l)(`attribute.${k.attributes[0]}Short`)),5),c[1]||(c[1]=P(" & ")),t("b",{style:V({color:h(O)[k.attributes[1]]})},b(h(l)(`attribute.${k.attributes[1]}Short`)),5),t("span",Nn," ("+b(h(l)("valueDisplay",{value:k.value}))+") ",1)]),t("span",null,b(k.notation),1)])]),t("div",On,[C(h(H),{icon:["fas","fa-dice"],"fixed-width":"",class:"text-primary"})])])],40,Ln))),128))],2))),128))}},jn=K(Vn,[["__scopeId","data-v-17230256"]]),Kn={class:"form-floating mb-3"},Un=["placeholder","value"],Wn={for:"action-name"},zn={class:"form-floating mb-3"},Fn=["placeholder","value"],qn={for:"action-tags"},Gn={class:"form-floating mb-3"},Yn=["value","selected"],Jn={for:"action-attribute"},Xn={class:"mb-3 text-start"},Zn={class:"form-check form-switch"},Qn=["checked"],eo={class:"form-check-label",for:"action-includeAttributeDiceToDamage"},to=["innerHTML"],no={class:"form-floating"},oo=["placeholder","value"],so={for:"action-damage"},io={__name:"ActionEditForm",props:{initialAction:{type:Object,required:!0}},setup(n,{expose:i}){const a=n,{t:s}=I(),e=j({id:a.initialAction.id,name:a.initialAction.name,tags:a.initialAction.tags.join(", "),attribute:a.initialAction.attribute,includeAttributeDiceToDamage:a.initialAction.includeAttributeDiceToDamage,notation:a.initialAction.notation,damage:a.initialAction.damage}),l=E(()=>Object.keys(pe).map(o=>({value:o,text:s(`attribute.${o}`)})));return me(()=>a.initialAction,o=>{e.value={id:o.id,name:o.name,tags:o.tags.join(", "),attribute:o.attribute,includeAttributeDiceToDamage:o.includeAttributeDiceToDamage,notation:o.notation,damage:o.damage}},{deep:!0}),i({formData:e}),(o,u)=>(p(),g("div",null,[t("div",Kn,[W(t("input",{type:"text",class:"form-control",id:"action-name",placeholder:h(s)("actionModal.namePlaceholder"),"onUpdate:modelValue":u[0]||(u[0]=m=>e.value.name=m),value:e.value.name},null,8,Un),[[Q,e.value.name]]),t("label",Wn,b(h(s)("actionModal.nameLabel")),1)]),t("div",zn,[W(t("input",{type:"text",class:"form-control",id:"action-tags",placeholder:h(s)("actionModal.tagsPlaceholder"),"onUpdate:modelValue":u[1]||(u[1]=m=>e.value.tags=m),value:e.value.tags},null,8,Fn),[[Q,e.value.tags]]),t("label",qn,b(h(s)("actionModal.tagsLabel")),1)]),t("div",Gn,[W(t("select",{id:"action-attribute",class:"form-select","onUpdate:modelValue":u[2]||(u[2]=m=>e.value.attribute=m)},[(p(!0),g(A,null,S(l.value,m=>(p(),g("option",{key:m.value,value:m.value,selected:e.value.attribute===m.value},b(m.text),9,Yn))),128))],512),[[Ee,e.value.attribute]]),t("label",Jn,b(h(s)("actionModal.attributeLabel")),1)]),t("div",Xn,[t("div",Zn,[t("input",{class:"form-check-input",type:"checkbox",value:"",id:"action-includeAttributeDiceToDamage",switch:"",checked:e.value.includeAttributeDiceToDamage},null,8,Qn),t("label",eo,b(o.$t("actionModal.includeAttributeDiceToDamageLabel")),1)]),t("label",{id:"checkIncludeAttributeDiceToDamageHelp",for:"action-includeAttributeDiceToDamage",class:"form-text",innerHTML:o.$t("actionModal.includeAttributeDiceToDamageHelp")},null,8,to)]),t("div",no,[W(t("input",{type:"text",class:"form-control",id:"action-damage",placeholder:h(s)("actionModal.damagePlaceholder"),"onUpdate:modelValue":u[3]||(u[3]=m=>e.value.notation=m),value:e.value.notation},null,8,oo),[[Q,e.value.notation]]),t("label",so,b(h(s)("actionModal.damageLabel")),1)])]))}};function ao(n){const i=q.global.t("diceShort");return new RegExp(`^([+-]?\\d*${i}\\d+|[+-]?\\d+)([+-]?\\d*${i}\\d+|[+-]?\\d+)*$`,"i").test(n)}function lo(n){const i=q.global.t("diceShort"),a=new RegExp(`([+-]?\\d*${i}\\d+|[+-]?\\d+)`,"gi"),s=n.match(a);return s?s.map(l=>{const o=new RegExp(`(\\d*)${i}(\\d+)`,"i"),u=l.match(o);return u?{type:"dice",count:u[1]?parseInt(u[1],10):1,sides:parseInt(u[2],10)}:{type:"bonus",bonus:parseInt(l,10)}}):[]}const ro={class:"d-flex flex-row justify-content-center align-items-center gap-2 mb-3"},co={class:"actions list-group"},uo=["onClick","onContextmenu"],mo={class:"flex-grow-0"},fo={class:"d-flex flex-column flex-grow-1"},po={class:"mb-2"},ho={key:0,class:"d-flex gap-2 mb-2"},go={class:"d-flex flex-row align-items-center gap-2"},bo={class:"d-flex flex-row align-items-center gap-2"},vo={key:0},yo={class:"btn-group-vertical"},_o=["onClick"],xo=["onClick"],ko={__name:"HeroActions",props:{hero:{type:Object,required:!0}},emits:["add:action","update:action","delete:action"],setup(n,{emit:i}){const a=n,s=i,{t:e}=I(),{openRollContextMenu:l}=ie(),o=E(()=>{const c={};for(const[f,r]of Object.entries(a.hero.attributes)){const{notation:y}=le(r);c[f]=y}return c}),u=(c,f={})=>{Dn(c,a.hero.attributes[c.attribute],f)},m=(c,f)=>{l(c,y=>{u(f,y)},{includeFollowUpOption:!0})};function $(){const c={id:$e(),name:e("actionModal.defaultName"),tags:[],attribute:Object.keys(pe)[0],includeAttributeDiceToDamage:!0,damage:[],notation:`1${e("diceShort")}4`};v(c,!0)}function v(c,f=!1){const r={...c},y=f?e("actionModal.newTitle"):e("actionModal.editTitle",{name:r.name}),k=ae(io,{initialAction:r});R.fire({title:y,html:k,confirmButtonColor:"var(--bs-success)",confirmButtonText:e("save"),showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:e("cancel"),preConfirm:()=>{const T=document.getElementById("action-name").value,x=document.getElementById("action-tags").value.split(",").map(re=>re.trim()).filter(re=>re!==""),_=document.getElementById("action-attribute").value,D=document.getElementById("action-includeAttributeDiceToDamage").checked,w=document.getElementById("action-damage").value;if(!ao(w))return R.showValidationMessage(e("actionModal.invalidDamageNotation")),!1;const B=lo(w);return{name:T,tags:x,attribute:_,includeAttributeDiceToDamage:D,notation:w,damage:B}}}).then(T=>{if(T.isConfirmed){const x={...r,...T.value};a.hero.actions.some(_=>_.id===x.id)?s("update:action",x):s("add:action",x)}})}function d(c){a.hero.actions.findIndex(r=>r.id===c.id)!==-1&&R.fire({title:e("deleteAction.title",{name:c.name}),text:e("deleteAction.text"),icon:"warning",confirmButtonText:e("delete"),confirmButtonColor:"var(--bs-primary)",showCancelButton:!0,cancelButtonColor:"var(--bs-danger)",cancelButtonText:e("cancel")}).then(r=>{r.isConfirmed&&(s("delete:action",c.id),R.fire({title:e("deleteAction.deletedModal.title",{name:c.name}),html:e("deleteAction.deletedModal.text"),icon:"success",timer:2e3,timerProgressBar:!0,confirmButtonText:e("close"),confirmButtonColor:"var(--bs-primary)"}))})}return(c,f)=>(p(),g(A,null,[t("div",ro,[t("h2",null,b(h(e)("hero.weapons&actions")),1),t("button",{class:"btn btn-primary",onClick:N($,["stop"])},[C(h(H),{icon:["fas","fa-plus"],"fixed-width":""})])]),t("div",co,[(p(!0),g(A,null,S(n.hero.actions,r=>(p(),g("div",{key:`weapon_${r.id}`,class:"actions__action list-group-item list-group-item-action d-flex flex-row gap-2 align-items-center",onClick:y=>u(r),onContextmenu:y=>m(y,r)},[t("div",mo,[C(h(H),{icon:["fas","fa-dice"],"fixed-width":"",class:"text-primary"})]),t("div",fo,[t("h3",po,b(r.name),1),r.tags&&r.tags.length>0?(p(),g("div",ho,[(p(!0),g(A,null,S(r.tags,(y,k)=>(p(),g("span",{class:"badge rounded-pill text-bg-dark",key:`weapon_${r.id}_tag_${k}`},b(y),1))),128))])):M("",!0),t("div",null,[t("div",go,[t("b",{style:V({color:h(O)[r.attribute]})},b(h(e)(`attribute.${r.attribute}Short`)),5),t("span",null,b(o.value[r.attribute]),1)])]),t("div",bo,[t("b",null,b(h(e)("damage")),1),t("span",null,b(r.notation),1),r.includeAttributeDiceToDamage?(p(),g("span",vo,b(c.$t("action.includeAttributeDiceToDamage")),1)):M("",!0)])]),t("div",yo,[t("button",{class:"btn btn-dark",onClick:N(y=>v(r),["stop"])},[C(h(H),{icon:["fas","fa-edit"],"fixed-width":""})],8,_o),t("button",{class:"btn btn-danger",onClick:N(y=>d(r),["stop"])},[C(h(H),{icon:["fas","fa-trash"],"fixed-width":""})],8,xo)])],40,uo))),128))])],64))}},$o=K(ko,[["__scopeId","data-v-83260c98"]]),wo={class:"attributes"},Co=["onClick","onContextmenu"],Ao={class:"input-group"},To=["onClick"],Do=["value","onInput"],Mo={__name:"HeroAttributes",props:{hero:{type:Object,required:!0}},emits:["update:attribute"],setup(n,{emit:i}){const a=n,s=i,{openRollContextMenu:e}=ie(),l=E(()=>{const v={};for(const[d,c]of Object.entries(a.hero.attributes)){const{dice:f,bonus:r,pool:y,notation:k}=le(c);v[d]={name:d,value:c,dice:f,bonus:r,pool:y,notation:k}}return v});function o(v,d={}){An(v,d)}function u(v,d){e(v,c=>{o(d,c)})}function m(v,d){const c=Number(d.target.value);s("update:attribute",v,c)}function $(v){const d=a.hero.attributes[v]+5;s("update:attribute",v,d)}return(v,d)=>(p(),g("div",wo,[(p(!0),g(A,null,S(l.value,(c,f)=>(p(),g("div",{key:f,class:"attribute"},[t("button",{class:"btn d-flex flex-row w-100 gap-2 align-items-center justify-content-between cursor-pointer",onClick:N(r=>o(c),["prevent"]),onContextmenu:r=>u(r,c)},[t("b",{style:V({color:h(O)[f]})},b(v.$t(`attribute.${f}`)),5),t("span",null,[C(h(H),{icon:["fas","fa-dice"],"fixed-width":"",class:"text-primary"})])],40,Co),t("div",Ao,[t("button",{class:"btn btn-outline-primary",onClick:N(r=>$(f),["prevent"])}," +5 ",8,To),t("input",{type:"number",value:n.hero.attributes[f],onInput:r=>m(f,r),class:"form-control form-control-sm"},null,40,Do)]),t("span",null,b(c.notation),1)]))),128))]))}},Lo=K(Mo,[["__scopeId","data-v-0f825858"]]),Ho={class:"d-flex flex-column gap-2"},So={class:"d-flex flex-row"},Po={__name:"HeroInfo",props:{hero:{type:Object,required:!0}},setup(n){const i=n,a=fe();function s(l){const o=l.target.value.trim();if(!o)return;const u=JSON.parse(JSON.stringify(i.hero));u.name=o,e(u)}function e(l){a.saveHero(l)}return(l,o)=>(p(),g("div",Ho,[t("div",So,[t("input",{type:"text",class:"form-control",onInput:s},null,32)])]))}},Bo={class:"d-flex flex-row justify-content-between gap-3"},Eo={class:"list-group"},Ro={class:"list-group-item"},Io={class:"list-group-item d-flex flex-row gap-2 align-items-center"},No={class:"list-group"},Oo={class:"list-group-item"},Vo={class:"list-group-item d-flex flex-column"},jo={__name:"HeroStats",props:{hero:{type:Object,required:!0}},setup(n){const a=n.hero;return(s,e)=>(p(),g("div",Bo,[t("div",Eo,[e[3]||(e[3]=t("div",{class:"list-group-item list-group-item-danger"},"Trefferpunkte",-1)),t("div",Ro,[W(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=l=>h(a).currentHitPoints=l)},null,512),[[Q,h(a).currentHitPoints]])]),t("div",Io,[t("b",null,"Max: "+b(h(a).maxHitPoints),1),e[2]||(e[2]=t("small",null,"erholt: +10",-1))])]),t("div",No,[e[4]||(e[4]=t("div",{class:"list-group-item list-group-item-primary"},"Mana",-1)),t("div",Oo,[W(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=l=>h(a).currentManaPoints=l)},null,512),[[Q,h(a).currentManaPoints]])]),t("div",Vo,[t("b",null,"Max: "+b(h(a).maxManaPoints),1)])])]))}},Ko={key:0},Uo={class:"d-flex flex-row justify-content-between align-items-center"},Wo={class:"d-flex align-items-center"},zo={class:"d-flex gap-2"},Fo={class:"hero"},qo={class:"hero__info"},Go={class:"hero__attribute"},Yo={class:"hero__stats"},Jo={class:"hero__abilities"},Xo={class:"hero__actions"},Zo={key:1},Qo={class:"alert alert-warning"},es={__name:"HeroesDetailView",setup(n){const{t:i}=I(),a=ve(),{showDeleteHeroModal:s}=ke(),e=fe(),l=E(()=>a.params.id),o=E(()=>e.getHeroById(l.value)||null);function u(){o.value&&s(o.value,()=>{e.deleteHero(o.value),be.push({name:"heroes.list"})})}function m(f,r){o.value.attributes[f]=Number(r)}function $(f,r){const y=o.value.abilities.find(k=>k.name===f);y&&(y.honeLevel=r,console.log(`Ability ${f} hone level updated to: ${r}`))}function v(f){o.value.actions.push(f)}function d(f){const r=o.value.actions.findIndex(y=>y.id===f.id);r!==-1&&(o.value.actions[r]=f)}function c(f){const r=o.value.actions.findIndex(y=>y.id===f);r!==-1&&o.value.actions.splice(r,1)}return(f,r)=>{const y=se("RouterLink");return o.value?(p(),g("div",Ko,[t("div",Uo,[t("div",Wo,[C(y,{to:{name:"heroes.list"},class:"btn btn-link",title:"zurück"},{default:F(()=>[C(h(H),{icon:["fas","fa-chevron-left"],"fixed-width":""})]),_:1}),t("h1",null,b(o.value.name),1)]),t("div",zo,[t("button",{class:"btn btn-danger",onClick:u,title:"wech damit"},[C(h(H),{icon:["fas","fa-trash"],"fixed-width":""})])])]),r[1]||(r[1]=t("hr",null,null,-1)),t("div",Fo,[t("div",qo,[C(Po,{hero:o.value},null,8,["hero"])]),t("div",Go,[C(Lo,{hero:o.value,"onUpdate:attribute":m},null,8,["hero"])]),t("div",Yo,[C(jo,{hero:o.value},null,8,["hero"])]),t("div",Jo,[C(jn,{hero:o.value,"onUpdate:abilityHoneLevel":$},null,8,["hero"])]),t("div",Xo,[C($o,{hero:o.value,"onAdd:action":v,"onUpdate:action":d,"onDelete:action":c},null,8,["hero"])]),r[0]||(r[0]=t("div",{class:"hero__talents"},null,-1))])])):(p(),g("div",Zo,[t("div",Qo,[t("h1",null,b(f.$t("heroNotFound.title")),1),t("span",null,[P(b(f.$t("heroNotFound.text")),1),r[2]||(r[2]=t("br",null,null,-1)),C(y,{class:"alert-link",to:{name:"heroes.list"}},{default:F(()=>[P(b(f.$t("heroesList.navigateTo")),1)]),_:1})])])]))}}},ts=[{path:"/",name:"home",component:pt},{path:"/heroes",name:"heroes",redirect:{name:"heroes.list"},children:[{path:"",name:"heroes.list",component:$t},{path:":id",name:"heroes.detail",component:es,props:!0,meta:{mainClass:"container-fluid"}}]}],be=Re({history:Ie("/gothic-tales/"),routes:ts});var ns=je();const z=xe(ns);z.setDriver([z.INDEXEDDB,z.LOCALSTORAGE,z.WEBSQL]).then(()=>{console.debug("[PiniaPersistPlugin] LocalForage drivers set: IndexedDB prioritized.")}).catch(n=>{console.error("[PiniaPersistPlugin] Failed to set LocalForage drivers:",n)});function os(n,i){let a;return function(...e){const l=this,o=function(){a=null,n.apply(l,e)};clearTimeout(a),a=setTimeout(o,i)}}function ss(n={}){const{baseKey:i="pinia",keySeparator:a="-",suffix:s="data",defaultDebounceDelay:e=300,excludePathsOnAutoPersist:l=["loaded"]}=n;return async({store:o,options:u})=>{const m=u?.persist;if(!m)return;const{key:$,paths:v,serializer:d=_=>JSON.stringify(_),deserializer:c=_=>JSON.parse(_),debounce:f=e,customKeyBuilder:r}=typeof m=="object"?m:{};let y;v!==void 0?y=v:y=Object.keys(o.$state).filter(_=>!l.includes(_));const T=(()=>{if(r)return r({baseKey:i,storeId:o.$id,separator:a,suffix:s,storeSpecificKey:$});const _=typeof $=="function"?$(o.$id):$||o.$id;return`${i}${a}${_}${a}${s}`})();try{const _=await z.getItem(T);if(_){const D=c(_),w={};y.forEach(B=>{D&&typeof D=="object"&&D.hasOwnProperty(B)&&(w[B]=D[B])}),o.$patch(w)}}catch(_){console.error(`[PiniaPersistPlugin] Error loading store '${o.$id}' (Key: ${T}) from IndexDB:`,_)}finally{o.hasOwnProperty("loaded")&&(o.loaded=!0)}const x=os(_=>{try{const D=d(_);z.setItem(T,D)}catch(D){console.error(`[PiniaPersistPlugin] Error saving store '${o.$id}' (Key: ${T}) to IndexDB:`,D)}},f);o.$subscribe((_,D)=>{const w={};y.forEach(B=>{D.hasOwnProperty(B)?w[B]=Ne(D[B]):console.warn(`[PiniaPersistPlugin] Path '${B}' in store '${o.$id}' not found. Will not be persisted.`)}),x(w)})}}const De=Oe(),is=ss({baseKey:"gothic_tales"});De.use(is);Ke.add(Ue,We,ze,Fe,qe,Ge);const te=_e(dt);te.component("font-awesome-icon",H);te.use(be);te.use(De);te.use(q);te.mount("#app");
